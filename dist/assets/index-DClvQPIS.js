import{r as u,u as Mt,j as e,N as ds,B as xa,a as ma,b as De,d as ha}from"./vendor-react-B0Xi4u7S.js";import{H as fa,L as ga,C as ys,a as cs,G as re,S as bs,I as js,M as va,U as ya,P as Ss,B as ba,V as zt,b as de,A as ja,T as He,c as Ns,d as xt,e as Sa,F as We,f as Na,g as ka,h as wa,i as ks,j as Aa,k as ws,l as Ia,m as As,n as Bt,E as Ca,o as Pt,p as Z,q as te,r as Ta,s as It,t as Ct,X as Ot,u as Ea,v as ps,w as Ra,x as Ke,y as _t,z as za,D as Oa,J as _a,K as Da,N as Is,O as La,Q as Ma,R as Tt,W as us,Y as Ba}from"./vendor-ui-C1fOLsQ2.js";import{i as Pa}from"./vendor-editor-BvsJV83P.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))g(x);new MutationObserver(x=>{for(const f of x)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&g(p)}).observe(document,{childList:!0,subtree:!0});function n(x){const f={};return x.integrity&&(f.integrity=x.integrity),x.referrerPolicy&&(f.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?f.credentials="include":x.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function g(x){if(x.ep)return;x.ep=!0;const f=n(x);fetch(x.href,f)}})();const $a=({menuItems:s,user:i,onLogout:n})=>{const g=i?.role||"secondary",[x,f]=u.useState({}),p=Mt(),b=l=>{f(c=>({...c,[l]:!c[l]}))},v={Layout:As,Home:Ia,Menu:ws,Maximize:Aa,Type:ks,Star:wa,Anchor:ka,Info:Na,FileText:We,List:Sa,Calendar:xt,Clock:Ns,Trophy:He,Award:ja,Image:de,Video:zt,BookOpen:ba,Phone:Ss,Users:ya,Monitor:va,Inbox:js,Settings:bs,Globe:re},m=({name:l,className:c})=>{const A=v[l];return A?e.jsx(A,{className:c,size:18}):e.jsx(cs,{className:c,size:18})},T=l=>{const c=l.children&&l.children.length>0,A=x[l.title],j=E=>E?E.includes("?")?p.pathname+p.search===E:p.pathname===E:!1,w=j(l.path)||c&&l.children?.some(E=>j(E.path));return c?e.jsxs("li",{className:`sidebar-item ${w?"active":""}`,children:[e.jsxs("div",{className:`sidebar-link has-children ${A?"active expanded":""}`,onClick:()=>b(l.title),children:[l.icon&&e.jsx(m,{name:l.icon,className:"sidebar-icon"}),e.jsx("span",{className:"sidebar-text",children:l.title}),e.jsx(ys,{className:`sidebar-chevron ${A?"rotate":""}`,size:16})]}),e.jsx("ul",{className:`sidebar-submenu ${A?"show":""}`,children:l.children?.map(E=>e.jsx("li",{className:"sidebar-submenu-item",children:e.jsxs(ds,{to:E.path||"#",className:()=>`sidebar-submenu-link ${j(E.path)?"active":""}`,children:[e.jsx(cs,{size:8,className:"submenu-dot"}),e.jsx("span",{children:E.title})]})},E.title))})]},l.title):e.jsx("li",{className:"sidebar-item",children:e.jsxs(ds,{to:l.path||"#",className:()=>`sidebar-link ${j(l.path)?"active":""}`,children:[l.icon&&e.jsx(m,{name:l.icon,className:"sidebar-icon"}),e.jsx("span",{className:"sidebar-text",children:l.title}),l.badge&&e.jsx("span",{className:`badge ${l.badge.color} sidebar-badge`,children:l.badge.text})]})},l.title)},C=l=>{const c=["/frontend-settings","/users-management"];return l.map(j=>{const w=j.children?C(j.children):void 0;return g==="secondary"&&c.some(P=>j.path?.toLowerCase()===P)||!j.path&&(!w||w.length===0)?null:{...j,children:w}}).filter(Boolean)};return e.jsxs("aside",{className:"sidebar",children:[e.jsx("div",{className:"sidebar-header",children:e.jsxs("div",{className:"brand-logo",children:[e.jsx(fa,{className:"logo-icon",size:24,fill:"currentColor"}),e.jsxs("span",{className:"brand-name",children:["FORSAJ",e.jsx("span",{children:"PANEL"})]})]})}),e.jsxs("div",{className:"sidebar-content",children:[e.jsx("div",{className:"sidebar-section-label",children:"ƏSAS NAVİQASİYA"}),e.jsxs("ul",{className:"sidebar-menu",children:[C(s).map(l=>T(l)),s.length===0&&e.jsx("div",{className:"empty-sidebar-msg",children:e.jsx("p",{children:"Menyu boşdur"})})]})]}),e.jsx("div",{className:"sidebar-footer",children:e.jsxs("button",{className:"logout-btn",onClick:n,children:[e.jsx(ga,{size:18}),e.jsx("span",{children:"Çıxış"})]})})]})},Ya=({user:s})=>e.jsxs("header",{className:"header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"icon-btn toggle-sidebar",children:e.jsx(ws,{size:20})}),e.jsxs("div",{className:"header-search",children:[e.jsx(Bt,{size:18,className:"search-icon"}),e.jsx("input",{type:"text",placeholder:"Hər şeyi axtar..."})]})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"view-site-btn",children:[e.jsx(Ca,{size:16})," Sayta Bax"]}),e.jsxs("div",{className:"header-profile",children:[e.jsxs("div",{className:"profile-info",children:[e.jsx("span",{className:"profile-name",children:s?.name||"Forsaj İdarəçisi"}),e.jsx("span",{className:"profile-status",children:s?.role==="master"?"Baş Admin":"Sayt Redaktoru"})]}),e.jsx("img",{src:`https://ui-avatars.com/api/?name=${s?.name||"Admin"}&background=random`,alt:"Profil"})]})]})]});let Fa={data:""},qa=s=>{if(typeof window=="object"){let i=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return i.nonce=window.__nonce__,i.parentNode||(s||document.head).appendChild(i),i.firstChild}return s||Fa},Ga=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ua=/\/\*[^]*?\*\/|  +/g,xs=/\n+/g,ve=(s,i)=>{let n="",g="",x="";for(let f in s){let p=s[f];f[0]=="@"?f[1]=="i"?n=f+" "+p+";":g+=f[1]=="f"?ve(p,f):f+"{"+ve(p,f[1]=="k"?"":i)+"}":typeof p=="object"?g+=ve(p,i?i.replace(/([^,])+/g,b=>f.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,v=>/&/.test(v)?v.replace(/&/g,b):b?b+" "+v:v)):f):p!=null&&(f=/^--/.test(f)?f:f.replace(/[A-Z]/g,"-$&").toLowerCase(),x+=ve.p?ve.p(f,p):f+":"+p+";")}return n+(i&&x?i+"{"+x+"}":x)+g},pe={},Cs=s=>{if(typeof s=="object"){let i="";for(let n in s)i+=n+Cs(s[n]);return i}return s},Ha=(s,i,n,g,x)=>{let f=Cs(s),p=pe[f]||(pe[f]=(v=>{let m=0,T=11;for(;m<v.length;)T=101*T+v.charCodeAt(m++)>>>0;return"go"+T})(f));if(!pe[p]){let v=f!==s?s:(m=>{let T,C,l=[{}];for(;T=Ga.exec(m.replace(Ua,""));)T[4]?l.shift():T[3]?(C=T[3].replace(xs," ").trim(),l.unshift(l[0][C]=l[0][C]||{})):l[0][T[1]]=T[2].replace(xs," ").trim();return l[0]})(s);pe[p]=ve(x?{["@keyframes "+p]:v}:v,n?"":"."+p)}let b=n&&pe.g?pe.g:null;return n&&(pe.g=pe[p]),((v,m,T,C)=>{C?m.data=m.data.replace(C,v):m.data.indexOf(v)===-1&&(m.data=T?v+m.data:m.data+v)})(pe[p],i,g,b),p},Wa=(s,i,n)=>s.reduce((g,x,f)=>{let p=i[f];if(p&&p.call){let b=p(n),v=b&&b.props&&b.props.className||/^go/.test(b)&&b;p=v?"."+v:b&&typeof b=="object"?b.props?"":ve(b,""):b===!1?"":b}return g+x+(p??"")},"");function gt(s){let i=this||{},n=s.call?s(i.p):s;return Ha(n.unshift?n.raw?Wa(n,[].slice.call(arguments,1),i.p):n.reduce((g,x)=>Object.assign(g,x&&x.call?x(i.p):x),{}):n,qa(i.target),i.g,i.o,i.k)}let Ts,Dt,Lt;gt.bind({g:1});let ue=gt.bind({k:1});function Ka(s,i,n,g){ve.p=i,Ts=s,Dt=n,Lt=g}function ye(s,i){let n=this||{};return function(){let g=arguments;function x(f,p){let b=Object.assign({},f),v=b.className||x.className;n.p=Object.assign({theme:Dt&&Dt()},b),n.o=/ *go\d+/.test(v),b.className=gt.apply(n,g)+(v?" "+v:"");let m=s;return s[0]&&(m=b.as||s,delete b.as),Lt&&m[0]&&Lt(b),Ts(m,b)}return x}}var Va=s=>typeof s=="function",ft=(s,i)=>Va(s)?s(i):s,Za=(()=>{let s=0;return()=>(++s).toString()})(),Es=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let i=matchMedia("(prefers-reduced-motion: reduce)");s=!i||i.matches}return s}})(),Qa=20,$t="default",Rs=(s,i)=>{let{toastLimit:n}=s.settings;switch(i.type){case 0:return{...s,toasts:[i.toast,...s.toasts].slice(0,n)};case 1:return{...s,toasts:s.toasts.map(p=>p.id===i.toast.id?{...p,...i.toast}:p)};case 2:let{toast:g}=i;return Rs(s,{type:s.toasts.find(p=>p.id===g.id)?1:0,toast:g});case 3:let{toastId:x}=i;return{...s,toasts:s.toasts.map(p=>p.id===x||x===void 0?{...p,dismissed:!0,visible:!1}:p)};case 4:return i.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(p=>p.id!==i.toastId)};case 5:return{...s,pausedAt:i.time};case 6:let f=i.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(p=>({...p,pauseDuration:p.pauseDuration+f}))}}},mt=[],zs={toasts:[],pausedAt:void 0,settings:{toastLimit:Qa}},ce={},Os=(s,i=$t)=>{ce[i]=Rs(ce[i]||zs,s),mt.forEach(([n,g])=>{n===i&&g(ce[i])})},_s=s=>Object.keys(ce).forEach(i=>Os(s,i)),Xa=s=>Object.keys(ce).find(i=>ce[i].toasts.some(n=>n.id===s)),vt=(s=$t)=>i=>{Os(i,s)},Ja={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ei=(s={},i=$t)=>{let[n,g]=u.useState(ce[i]||zs),x=u.useRef(ce[i]);u.useEffect(()=>(x.current!==ce[i]&&g(ce[i]),mt.push([i,g]),()=>{let p=mt.findIndex(([b])=>b===i);p>-1&&mt.splice(p,1)}),[i]);let f=n.toasts.map(p=>{var b,v,m;return{...s,...s[p.type],...p,removeDelay:p.removeDelay||((b=s[p.type])==null?void 0:b.removeDelay)||s?.removeDelay,duration:p.duration||((v=s[p.type])==null?void 0:v.duration)||s?.duration||Ja[p.type],style:{...s.style,...(m=s[p.type])==null?void 0:m.style,...p.style}}});return{...n,toasts:f}},ti=(s,i="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:i,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...n,id:n?.id||Za()}),Ve=s=>(i,n)=>{let g=ti(i,s,n);return vt(g.toasterId||Xa(g.id))({type:2,toast:g}),g.id},$=(s,i)=>Ve("blank")(s,i);$.error=Ve("error");$.success=Ve("success");$.loading=Ve("loading");$.custom=Ve("custom");$.dismiss=(s,i)=>{let n={type:3,toastId:s};i?vt(i)(n):_s(n)};$.dismissAll=s=>$.dismiss(void 0,s);$.remove=(s,i)=>{let n={type:4,toastId:s};i?vt(i)(n):_s(n)};$.removeAll=s=>$.remove(void 0,s);$.promise=(s,i,n)=>{let g=$.loading(i.loading,{...n,...n?.loading});return typeof s=="function"&&(s=s()),s.then(x=>{let f=i.success?ft(i.success,x):void 0;return f?$.success(f,{id:g,...n,...n?.success}):$.dismiss(g),x}).catch(x=>{let f=i.error?ft(i.error,x):void 0;f?$.error(f,{id:g,...n,...n?.error}):$.dismiss(g)}),s};var si=1e3,ai=(s,i="default")=>{let{toasts:n,pausedAt:g}=ei(s,i),x=u.useRef(new Map).current,f=u.useCallback((C,l=si)=>{if(x.has(C))return;let c=setTimeout(()=>{x.delete(C),p({type:4,toastId:C})},l);x.set(C,c)},[]);u.useEffect(()=>{if(g)return;let C=Date.now(),l=n.map(c=>{if(c.duration===1/0)return;let A=(c.duration||0)+c.pauseDuration-(C-c.createdAt);if(A<0){c.visible&&$.dismiss(c.id);return}return setTimeout(()=>$.dismiss(c.id,i),A)});return()=>{l.forEach(c=>c&&clearTimeout(c))}},[n,g,i]);let p=u.useCallback(vt(i),[i]),b=u.useCallback(()=>{p({type:5,time:Date.now()})},[p]),v=u.useCallback((C,l)=>{p({type:1,toast:{id:C,height:l}})},[p]),m=u.useCallback(()=>{g&&p({type:6,time:Date.now()})},[g,p]),T=u.useCallback((C,l)=>{let{reverseOrder:c=!1,gutter:A=8,defaultPosition:j}=l||{},w=n.filter(F=>(F.position||j)===(C.position||j)&&F.height),E=w.findIndex(F=>F.id===C.id),P=w.filter((F,Q)=>Q<E&&F.visible).length;return w.filter(F=>F.visible).slice(...c?[P+1]:[0,P]).reduce((F,Q)=>F+(Q.height||0)+A,0)},[n]);return u.useEffect(()=>{n.forEach(C=>{if(C.dismissed)f(C.id,C.removeDelay);else{let l=x.get(C.id);l&&(clearTimeout(l),x.delete(C.id))}})},[n,f]),{toasts:n,handlers:{updateHeight:v,startPause:b,endPause:m,calculateOffset:T}}},ii=ue`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ri=ue`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ni=ue`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,li=ye("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ii} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ri} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ni} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,oi=ue`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,di=ye("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${oi} 1s linear infinite;
`,ci=ue`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,pi=ue`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ui=ye("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ci} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${pi} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,xi=ye("div")`
  position: absolute;
`,mi=ye("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,hi=ue`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,fi=ye("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${hi} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,gi=({toast:s})=>{let{icon:i,type:n,iconTheme:g}=s;return i!==void 0?typeof i=="string"?u.createElement(fi,null,i):i:n==="blank"?null:u.createElement(mi,null,u.createElement(di,{...g}),n!=="loading"&&u.createElement(xi,null,n==="error"?u.createElement(li,{...g}):u.createElement(ui,{...g})))},vi=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,yi=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,bi="0%{opacity:0;} 100%{opacity:1;}",ji="0%{opacity:1;} 100%{opacity:0;}",Si=ye("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ni=ye("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ki=(s,i)=>{let n=s.includes("top")?1:-1,[g,x]=Es()?[bi,ji]:[vi(n),yi(n)];return{animation:i?`${ue(g)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ue(x)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},wi=u.memo(({toast:s,position:i,style:n,children:g})=>{let x=s.height?ki(s.position||i||"top-center",s.visible):{opacity:0},f=u.createElement(gi,{toast:s}),p=u.createElement(Ni,{...s.ariaProps},ft(s.message,s));return u.createElement(Si,{className:s.className,style:{...x,...n,...s.style}},typeof g=="function"?g({icon:f,message:p}):u.createElement(u.Fragment,null,f,p))});Ka(u.createElement);var Ai=({id:s,className:i,style:n,onHeightUpdate:g,children:x})=>{let f=u.useCallback(p=>{if(p){let b=()=>{let v=p.getBoundingClientRect().height;g(s,v)};b(),new MutationObserver(b).observe(p,{subtree:!0,childList:!0,characterData:!0})}},[s,g]);return u.createElement("div",{ref:f,className:i,style:n},x)},Ii=(s,i)=>{let n=s.includes("top"),g=n?{top:0}:{bottom:0},x=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Es()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${i*(n?1:-1)}px)`,...g,...x}},Ci=gt`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ct=16,Ti=({reverseOrder:s,position:i="top-center",toastOptions:n,gutter:g,children:x,toasterId:f,containerStyle:p,containerClassName:b})=>{let{toasts:v,handlers:m}=ai(n,f);return u.createElement("div",{"data-rht-toaster":f||"",style:{position:"fixed",zIndex:9999,top:ct,left:ct,right:ct,bottom:ct,pointerEvents:"none",...p},className:b,onMouseEnter:m.startPause,onMouseLeave:m.endPause},v.map(T=>{let C=T.position||i,l=m.calculateOffset(T,{reverseOrder:s,gutter:g,defaultPosition:i}),c=Ii(C,l);return u.createElement(Ai,{id:T.id,key:T.id,onHeightUpdate:m.updateHeight,className:T.visible?Ci:"",style:c},T.type==="custom"?ft(T.message,T):x?x(T):u.createElement(wi,{toast:T,position:C}))}))},N=$;const Ei={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],["link","image","video"],["clean"]]},pt=({value:s,onChange:i,id:n,readOnly:g=!1})=>e.jsx("div",{className:"quill-editor-wrapper",id:n,children:e.jsx(Pa,{theme:"snow",value:s||"",onChange:i,modules:g?{toolbar:!1}:Ei,readOnly:g,placeholder:"Məzmunu daxil edin..."})}),we=s=>{if(/^[A-Z0-9_]+$/.test(s.id))return s.id.trim();const i=(s.label||"").trim();return i.startsWith("KEY:")?i.replace(/^KEY:\s*/i,"").trim():""},Ri=/\b[A-Z0-9]+(?:_[A-Z0-9]+)+\b/,ms=s=>Ri.test((s||"").trim()),hs=s=>s.replace(/_/g," ").replace(/\s+/g," ").trim(),ut=s=>{if(!s)return"";let i=s;for(let g=0;g<4;g++){const f=(new DOMParser().parseFromString(i,"text/html").body.textContent||"").trim();if(!f||f===i)break;i=f}return(new DOMParser().parseFromString(i,"text/html").body.textContent||"").replace(/\u00a0/g," ").replace(/\s+/g," ").trim()},fs=s=>{const i=(s||"").trim();if(!i)return"";if(/^(https?:)?\/\//i.test(i))return i;const n=i.startsWith("/")?i:`/${i}`;return`${window.location.origin}${n}`},Ds=s=>/&(?:lt|gt|nbsp|quot|amp);|<\/?[a-z][^>]*>/i.test(s||""),zi=s=>/<(ul|ol|li|a|img|iframe|video|table|h[1-6])\b|\[(b|i|u|url|img|center)\]/i.test(s||""),Oi=s=>!!(we(s)||ht(s.id)||s.id.startsWith("txt-")||s.id.startsWith("val-")||s.id.startsWith("RULES_")||s.id.startsWith("PAGE_")||s.id.startsWith("BTN_")||s.id.startsWith("DOC_")||Ds(s.value||"")&&!zi(s.value||"")),Ae="label-stat-",Ie="value-stat-",ht=s=>s.startsWith(Ae)||s.startsWith(Ie),_i=s=>s.startsWith(Ae)?s.slice(Ae.length):s.startsWith(Ie)?s.slice(Ie.length):"",Le=(s,i)=>we(s)?i==="value":!0,Di=s=>!we(s),Li=s=>!0,Et=/^PARTNER_(\d+)_(NAME|TAG|ICON|USE_IMAGE|IMAGE_ID)$/,Mi=s=>s==="NAME"?"name":s==="TAG"?"tag":s==="ICON"?"icon":s==="USE_IMAGE"?"useImage":s==="IMAGE_ID"?"imageId":null,Rt={hero:"Giriş Hissəsi",marquee:"Sürüşən Yazı",navbar:"Naviqasiya",about:"HAQQIMIZDA",mission_vision:"Missiya və Vizyon",values:"Dəyərlərimiz",eventspage:"Tədbirlər Səhifəsi",newspage:"Xəbər Səhifəsi",gallerypage:"Qalereya Səhifəsi",contactpage:"Əlaqə Səhifəsi",rulespage:"Qaydalar Səhifəsi",news:"Xəbərlər",drivers:"Sürücülər",categoryleaders:"Kateqoriya Liderləri",gallery:"Qalereya",videos:"Videolar",videoarchive:"Video Arxiv",footer:"Sayt Sonu",partners:"Tərəfdaşlar",offroadinfo:"Offroad Nədir?",whatisoffroad:"Offroad Nədir?",nextrace:"Növbəti Yarış",site:"Sayt Ayarları",settings:"Ümumi Parametrlər",general:"SİSTEM AYARLARI",app:"Tətbiq Ayarları"},Me={home:["navbar","hero","marquee","categoryleaders","nextrace","partners","footer"],abouttab:["about","mission_vision","values"],newstab:["newspage"],eventstab:["eventspage"],driverstab:["drivers"],gallerytab:["gallerypage","gallery","videos","videoarchive"],rulestab:["rulespage"],contacttab:["contactpage"]},Ls=Object.entries(Me).reduce((s,[i,n])=>(n.forEach(g=>{s[g]=i}),s),{}),gs=s=>{if(!s)return[];if(Me[s])return Me[s];const i=Ls[s];return i&&Me[i]?Me[i]:[s]},vs="forsaj_site_content_version",V=(s,i)=>Number.isFinite(s)?s:i,Bi=()=>{const[s,i]=u.useState([]),[n,g]=u.useState(0),[x,f]=u.useState(!1),[p,b]=u.useState(!1),[v,m]=u.useState(0),[T,C]=u.useState(""),[l,c]=u.useState(!1),[A,j]=u.useState(!1),[w,E]=u.useState(!1),[P,F]=u.useState([]),[Q,q]=u.useState(null),[ne,le]=u.useState(""),[G,Ms]=u.useState(""),[xe,Ze]=u.useState([]),[Ce,Qe]=u.useState(null),[L,Xe]=u.useState({}),[me,Je]=u.useState([]),[Te,et]=u.useState(null),[U,tt]=u.useState({}),[he,st]=u.useState([]),[Be,yt]=u.useState(null),[J,bt]=u.useState({}),jt=Mt(),Yt=new URLSearchParams(jt.search),St=Yt.get("mode"),Ee=Yt.get("page"),[Y,se]=u.useState("extract"),[at,it]=u.useState([]),Ft=u.useRef(!1),[Pe,qt]=u.useState(null),[be,Nt]=u.useState({});u.useEffect(()=>{se(St||"extract")},[St,Ee]);const[ae,je]=u.useState([]),[H,$e]=u.useState(null),[Re,Ye]=u.useState(null),[X,ze]=u.useState({}),Gt=async()=>{try{const a=await(await fetch("/api/site-content")).json();if(Array.isArray(a)){const y=["hero","marquee","navbar","about","mission_vision","values","rulespage","eventspage","newspage","gallerypage","contactpage","news","drivers","categoryleaders","gallery","videos","videoarchive","footer","partners","offroadinfo","whatisoffroad","nextrace","site","settings","general","app"],R=[...a],W=z=>{const I=z.sections||[],_=z.images||[],O=(B,D,ge)=>{I.some(At=>At.id===B)||I.push({id:B,type:"text",label:D,value:ge})},fe=(B,D,ge)=>{_.some(At=>At.id===B)||_.push({id:B,path:D,alt:ge,type:"remote",order:_.length})};if(O("txt-est-2018-motorsp-949","About Üst Başlıq","EST. 2018 // MOTORSPORT MƏRKƏZİ"),O("txt-forsaj-club-az-rba-66","About Ana Başlıq",'"FORSAJ CLUB" AZƏRBAYCANIN OFFROAD MƏDƏNİYYƏTİNİ PEŞƏKAR SƏVİYYƏYƏ ÇATDIRMAQ ÜÇÜN YARADILMIŞDIR.'),O("txt-bi-zi-m-mi-ssi-yamiz-424","Missiya Başlığı","BİZİM MİSSİYAMIZ"),O("txt-az-rbaycan-n-h-r-bir-45","Missiya Təsviri","Azərbaycanın hər bir guşəsində offroad idmanını təbliğ etmək, yerli pilotları beynəlxalq standartlara uyğun yetişdirmək və təbiəti qoruyaraq ekstremal adrenalin təcrübəsi bəxş etmək."),O("txt-h-d-fi-mi-z-dakar-ral-50","Missiya Hədəf Mətni","HƏDƏFİMİZ: DAKAR RALLİ 2026"),O("txt-bi-zi-m-baxi-imiz-944","Vizyon Başlığı","BİZİM BAXIŞIMIZ"),O("txt-regionun-n-b-y-k-mo-901","Vizyon Təsviri","Regionun ən böyük motorsport hubuna çevrilmək, rəqəmsal və fiziki infrastrukturlarla pilotlarımızı dəstəkləmək və motorsportu hər kəs üçün əlçatan bir ehtirasa çevirmək."),O("txt-qafqazin-li-der-klubu-758","Vizyon Şüarı","QAFQAZIN LİDER KLUBUNA ÇEVRİLMƏK"),O("txt-fundamental-pri-nsi-pl-219","Dəyərlər Alt Başlıq","FUNDAMENTAL PRİNSİPLƏR"),O("txt-sas-d-y-rl-ri-mi-z-482","Dəyərlər Başlığı","ƏSAS DƏYƏRLƏRİMİZ"),O("val-icon-1","Dəyər 1 İkonu","Shield"),O("val-title-1","Dəyər 1 Başlıq","TƏHLÜKƏSİZLİK"),O("val-desc-1","Dəyər 1 Təsvir","EKSTREMAL İDMANDA CAN SAĞLIĞI BİZİM BİR NÖMRƏLİ QAYDAMIZDIR. BÜTÜN TEXNİKALARIMIZ FIA STANDARTLARINA UYĞUN YOXLANILIR."),O("val-icon-2","Dəyər 2 İkonu","Users"),O("val-title-2","Dəyər 2 Başlıq","İCMA RUHU"),O("val-desc-2","Dəyər 2 Təsvir","FORSAJ BİR KLUBDAN DAHA ÇOX, SADİQ VƏ BÖYÜK BİR AİLƏDİR. BİRİMİZ HAMIMIZ, HAMIMIZ BİRİMİZ ÜÇÜN!"),O("val-icon-3","Dəyər 3 İkonu","Leaf"),O("val-title-3","Dəyər 3 Başlıq","TƏBİƏTİ QORU"),O("val-desc-3","Dəyər 3 Təsvir","BİZ OFFROAD EDƏRKƏN TƏBİƏTƏ ZƏRƏR VERMƏMƏYİ ÖZÜMÜZƏ BORC BİLİRİK. EKOLOJİ BALANS BİZİM ÜÇÜN MÜQƏDDƏSDİR."),O("val-icon-4","Dəyər 4 İkonu","Zap"),O("val-title-4","Dəyər 4 Başlıq","MÜKƏMMƏLLİK"),O("val-desc-4","Dəyər 4 Təsvir","HƏR YARIŞDA, HƏR DÖNGƏDƏ DAHA YAXŞI OLMAĞA ÇALIŞIRIQ. TƏLİMLƏRİMİZ PEŞƏKAR İNSTRUKTORLAR TƏRƏFİNDƏN İDARƏ OLUNUR."),I.some(B=>B.id.includes("label-stat"))&&I.some(B=>B.id.includes("value-stat"))){z.sections=I,fe("img-992","https://images.unsplash.com/photo-1541447271487-09612b3f49f7?q=80&w=1974&auto=format&fit=crop","Forsaj Club Detail"),z.images=_;return}[{label:"PİLOTLAR",value:"140+"},{label:"YARIŞLAR",value:"50+"},{label:"GƏNCLƏR",value:"20+"}].forEach((B,D)=>{const ge=`${D+1}`;I.push({id:`label-stat-${ge}`,type:"text",label:`Statistika Etiketi ${D+1}`,value:B.label}),I.push({id:`value-stat-${ge}`,type:"text",label:`Statistika Dəyəri ${D+1}`,value:B.value})}),z.sections=I,fe("img-992","https://images.unsplash.com/photo-1541447271487-09612b3f49f7?q=80&w=1974&auto=format&fit=crop","Forsaj Club Detail"),z.images=_},_e=z=>{const I=z.sections||[],_=z.images||[],O=(K,B,D)=>{I.some(ge=>ge.id===K)||I.push({id:K,type:"text",label:B,value:D})},fe=K=>{_.some(B=>B.id===K)||_.push({id:K,path:"",alt:K,type:"local",order:_.length})};O("SECTION_TITLE","Bölmə Başlığı","RƏSMİ TƏRƏFDAŞLARIMIZ"),[{name:"AZMF",tag:"OFFICIAL PARTNER",icon:"ShieldCheck"},{name:"OFFROAD AZ",tag:"OFFICIAL PARTNER",icon:"Truck"},{name:"GLOBAL 4X4",tag:"OFFICIAL PARTNER",icon:"Globe"},{name:"RACE TECH",tag:"OFFICIAL PARTNER",icon:"Zap"}].forEach((K,B)=>{const D=B+1;O(`PARTNER_${D}_NAME`,`Tərəfdaş ${D} Ad`,K.name),O(`PARTNER_${D}_TAG`,`Tərəfdaş ${D} Etiket`,K.tag),O(`PARTNER_${D}_ICON`,`Tərəfdaş ${D} İkon`,K.icon),O(`PARTNER_${D}_USE_IMAGE`,`Tərəfdaş ${D} Görsel İstifadə`,"false"),O(`PARTNER_${D}_IMAGE_ID`,`Tərəfdaş ${D} Görsel ID`,`partner-image-${D}`),fe(`partner-image-${D}`)}),z.sections=I,z.images=_},ee=z=>{const I=z.sections||[],_=(O,fe,Ue,K)=>{const B=I.findIndex(D=>D.id===O);if(B===-1){I.push({id:O,type:"text",label:fe,value:Ue,...K?{url:K}:{}});return}K&&!I[B].url&&(I[B].url=K)};_("text-3","Hero Düymə 1","YARIŞLARA BAX","events"),_("text-4","Hero Düymə 2","HAQQIMIZDA","about"),z.sections=I};y.forEach(z=>{const I=R.find(_=>_.id===z);I?z==="about"?W(I):z==="partners"?_e(I):z==="hero"&&ee(I):R.push({id:z,title:Rt[z]||z,sections:[{id:`${z}-default`,type:"text",label:"Bölmə",value:""}],images:[]})});const ns=R.find(z=>z.id==="about");ns&&W(ns);const ls=R.find(z=>z.id==="partners");ls&&_e(ls);const os=R.find(z=>z.id==="hero");os&&ee(os);const dt=new Map(y.map((z,I)=>[z,I]));R.sort((z,I)=>{const _=dt.has(z.id)?dt.get(z.id):Number.MAX_SAFE_INTEGER,O=dt.has(I.id)?dt.get(I.id):Number.MAX_SAFE_INTEGER;return _!==O?_-O:(z.title||z.id).localeCompare(I.title||I.id)});const ua=R.map(z=>({...z,sections:(z.sections||[]).map((I,_)=>{if(I.type!=="text")return I;const fe=Oi(I)?ut(I.value||""):(I.value||"").replace(/\u00a0/g," "),Ue=Ds(I.label||"")?ut(I.label||""):I.label;return{...I,label:Ue,value:fe,order:V(I.order,_)}}).sort((I,_)=>V(I.order,0)-V(_.order,0)),images:(z.images||[]).map((I,_)=>({...I,order:V(I.order,_)})).sort((I,_)=>V(I.order,0)-V(_.order,0))}));i(ua)}const[r,d,o,h,S,k]=await Promise.all([fetch(`/api/all-images?v=${Date.now()}`).then(y=>y.json()).catch(()=>({})),fetch("/api/events").then(y=>y.json()).catch(()=>[]),fetch("/api/news").then(y=>y.json()).catch(()=>[]),fetch("/api/drivers").then(y=>y.json()).catch(()=>[]),fetch("/api/gallery-photos").then(y=>y.json()).catch(()=>[]),fetch("/api/videos").then(y=>y.json()).catch(()=>[])]);r?.local&&F(r.local),Array.isArray(d)&&(Ze(d),d.length>0&&Ce===null&&(Qe(d[0].id),Xe(d[0]))),Array.isArray(o)&&(Je(o),o.length>0&&Te===null&&(et(o[0].id),tt({...o[0]}))),Array.isArray(h)&&(je(h),h.length>0&&H===null&&$e(h[0].id)),Array.isArray(S)&&it(S),Array.isArray(k)&&(st(k),k.length>0&&Be===null&&Jt(k[0].id))}catch(t){console.error("Content load error:",t)}};u.useEffect(()=>{Gt()},[]),u.useEffect(()=>{Ft.current||(Ft.current=!0,Ut())},[]),u.useEffect(()=>{const t=new URLSearchParams(jt.search),a=t.get("mode"),r=t.get("page");if(a&&["extract","events","news","drivers","videos","photos"].includes(a))se(a);else if(r){se("extract");const d=gs(r),o=s.findIndex(h=>d.includes(h.id));o!==-1&&g(o)}},[jt.search,s]);const Ut=async()=>{b(!0),C("Front-end komponentləri skan edilir..."),m(30);const t=Date.now(),a=N.loading("Sinxronizasiya başladı...");try{const r=await fetch("/api/extract-content",{method:"POST"});if(!r.ok){const k=await r.text();throw new Error(k||"Extraction failed")}m(60),C("Bulud bazası ilə sinxronizasiya edilir...");const d=await r.json(),o=d.pages||d,h=await fetch("/api/save-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!h.ok){const k=await h.text();throw new Error(k||"Save failed")}m(90),i(o);const S=Date.now()-t;S<800&&await new Promise(k=>setTimeout(k,800-S)),m(100),C("Tamamlandı!"),setTimeout(()=>{b(!1),localStorage.setItem("forsaj_extracted","true"),localStorage.setItem(vs,Date.now().toString()),N.success("Sinxronizasiya tamamlandı! Baza yeniləndi.",{id:a})},500)}catch(r){console.error("Extraction error:",r),b(!1),N.error(`Sinxronizasiya xətası: ${r.message}`,{id:a})}},oe=(t,a,r,d)=>{const o=[...s],h=o[t].sections.findIndex(S=>S.id===a);if(h!==-1){const S=o[t].sections[h];if(!Le(S,r))return;let k=d;const R=!!we(S)||ht(S.id)||S.id.startsWith("val-")||S.id.startsWith("txt-");(r==="value"||r==="label")&&R&&(k=ut(d)),o[t].sections[h][r]=k,i(o)}},Ht=(t,a)=>{const r=s[t];if(!r)return;const d=r.sections.find(h=>h.id===a);if(!d||!d.url)return;const o=fs(d.url);o&&o!==d.url&&oe(t,a,"url",o)},Wt=(t,a,r)=>{const d=[...s],o=d[t].images.findIndex(h=>h.id===a);o!==-1&&(d[t].images[o].alt=r,i(d))},Bs=()=>{if(!ne.trim()){N.error("Başlıq daxil edin!");return}const a={id:ne.toLowerCase().replace(/\s+/g,"-"),title:ne,sections:[{id:"text-0",type:"text",label:"Bölmə",value:"Yeni bölmə məzmunu..."}],images:[]};i([...s,a]),g(s.length),c(!1),le(""),N.success("Yeni bölmə əlavə edildi!")},Fe=(t,a,r)=>{if(n<0||n>=s.length)return;const d=[...s],o=d[n];if(o){if(t==="text"){const h=r||`text-${o.sections.length}-${Date.now()}`,S=o.sections.reduce((k,y,R)=>Math.max(k,V(y.order,R)),-1)+1;o.sections.push({id:h,type:"text",label:a||"Bölmə",value:"Yeni mətn sahəsi...",order:S}),N.success(`${a||"Yeni mətn"} sahəsi əlavə edildi`)}else{const h=r||`img-${o.images.length}-${Date.now()}`,S=o.images.reduce((k,y,R)=>Math.max(k,V(y.order,R)),-1)+1;o.images.push({id:h,path:"",alt:"",type:"local",order:S}),N.success("Yeni şəkil sahəsi əlavə edildi")}i(d)}},Kt=(t,a)=>{if(n<0||n>=s.length)return;const r=[...s],d=r[n];d&&(t==="text"?(d.sections=d.sections.filter(o=>o.id!==a),d.sections=d.sections.map((o,h)=>({...o,order:h}))):(d.images=d.images.filter(o=>o.id!==a),d.images=d.images.map((o,h)=>({...o,order:h}))),i(r),N.success("Sahə silindi"))},rt=(t,a,r)=>{if(n<0||n>=s.length)return;const d=[...s],o=d[n];if(!o)return;const h=t==="text"?o.sections:o.images,S=h.findIndex(R=>R.id===a);if(S===-1)return;const k=r==="up"?S-1:S+1;if(k<0||k>=h.length)return;const y=h[S];h[S]=h[k],h[k]=y,t==="text"?o.sections=(o.sections||[]).map((R,W)=>({...R,order:W})):o.images=(o.images||[]).map((R,W)=>({...R,order:W})),i(d)},Vt=()=>{if(n<0||n>=s.length)return;const t=[...s],a=t[n];if(!a||a.id!=="about")return;const r=`${Date.now()}`;a.sections.push({id:`${Ae}${r}`,type:"text",label:"Statistika Etiketi",value:"YENİ STATİSTİKA"},{id:`${Ie}${r}`,type:"text",label:"Statistika Dəyəri",value:"0+"}),i(t),N.success("Yeni statistika əlavə edildi")},Zt=(t,a,r)=>{if(n<0||n>=s.length)return;const d=[...s],o=d[n];if(!o||o.id!=="about")return;const h=a==="label"?`${Ae}${t}`:`${Ie}${t}`,S=o.sections.findIndex(y=>y.id===h),k=ut(r);S!==-1?o.sections[S].value=k:o.sections.push({id:h,type:"text",label:a==="label"?"Statistika Etiketi":"Statistika Dəyəri",value:k}),i(d)},Ps=t=>{if(n<0||n>=s.length)return;const a=[...s],r=a[n];!r||r.id!=="about"||(r.sections=r.sections.filter(d=>d.id!==`${Ae}${t}`&&d.id!==`${Ie}${t}`),i(a),N.success("Statistika silindi"))},qe=t=>{if(!t)return[];const a=new Map;return(t.sections||[]).forEach(r=>{const d=r.id.match(Et);if(!d)return;const o=Number(d[1]),h=Mi(d[2]);if(!h)return;const S=a.get(o)||{index:o,name:"",tag:"OFFICIAL PARTNER",icon:"ShieldCheck",useImage:"false",imageId:`partner-image-${o}`};S[h]=r.value||"",a.set(o,S)}),Array.from(a.values()).sort((r,d)=>r.index-d.index)},nt=t=>{if(n<0||n>=s.length)return;const a=[...s],r=a[n];if(!r||r.id!=="partners")return;const d=(r.sections||[]).filter(y=>!Et.test(y.id)),o=[];t.forEach(y=>{o.push({id:`PARTNER_${y.index}_NAME`,type:"text",label:`Tərəfdaş ${y.index} Ad`,value:y.name},{id:`PARTNER_${y.index}_TAG`,type:"text",label:`Tərəfdaş ${y.index} Etiket`,value:y.tag},{id:`PARTNER_${y.index}_ICON`,type:"text",label:`Tərəfdaş ${y.index} İkon`,value:y.icon},{id:`PARTNER_${y.index}_USE_IMAGE`,type:"text",label:`Tərəfdaş ${y.index} Görsel İstifadə`,value:y.useImage},{id:`PARTNER_${y.index}_IMAGE_ID`,type:"text",label:`Tərəfdaş ${y.index} Görsel ID`,value:y.imageId||`partner-image-${y.index}`})});const h=r.images||[],S=new Set(t.map(y=>y.imageId||`partner-image-${y.index}`)),k=[...h];S.forEach(y=>{k.some(R=>R.id===y)||k.push({id:y,path:"",alt:y,type:"local",order:k.length})}),r.sections=[...d,...o],r.images=k.map((y,R)=>({...y,order:R})),i(a)},Ge=(t,a,r)=>{const d=qe(s[n]).map(o=>o.index===t?{...o,[a]:r}:o);nt(d)},$s=()=>{const t=qe(s[n]),a=(t[t.length-1]?.index||0)+1;t.push({index:a,name:`PARTNER ${a}`,tag:"OFFICIAL PARTNER",icon:"ShieldCheck",useImage:"false",imageId:`partner-image-${a}`}),nt(t)},Ys=t=>{const a=qe(s[n]).filter(r=>r.index!==t);nt(a)},Qt=(t,a)=>{const r=qe(s[n]),d=r.findIndex(k=>k.index===t);if(d===-1)return;const o=a==="up"?d-1:d+1;if(o<0||o>=r.length)return;const h=r[d];r[d]=r[o],r[o]=h;const S=r.map((k,y)=>({...k,index:y+1,imageId:k.imageId||`partner-image-${y+1}`}));nt(S)},Fs=(t,a)=>{q({pageIdx:t,imgId:a}),j(!0)},Xt=async(t,a)=>{const r=new FormData;r.append("image",t);const d=N.loading(a?.loadingText||"Şəkil yüklənir...");try{const o=await fetch("/api/upload-image",{method:"POST",body:r});if(o.ok){const h=await o.json();return N.success(a?.successText||"Şəkil uğurla yükləndi",{id:d}),h.url}else throw new Error("Upload fail")}catch(o){return console.error("Upload error:",o),N.error(a?.errorText||"Görsəl yüklənərkən xəta baş verdi",{id:d}),null}},Oe=async t=>Xt(t),qs=async(t,a,r)=>{const d=t.target.files?.[0];if(!d)return;const o=await Oe(d);if(o){const h=[...s],S=h[a].images.findIndex(k=>k.id===r);S!==-1&&(h[a].images[S].path=o,h[a].images[S].type="local",i(h))}},Gs=t=>{if(!Q)return;const a=[...s];if(w){const r=`img-${a[Q.pageIdx].images.length}-${Date.now()}`;a[Q.pageIdx].images.push({id:r,path:t,alt:"Daxil edildi",type:"local"}),E(!1)}else{const r=a[Q.pageIdx].images.findIndex(d=>d.id===Q.imgId);r!==-1&&(a[Q.pageIdx].images[r].path=t,a[Q.pageIdx].images[r].type="local")}i(a),j(!1),N.success("Şəkil seçildi")},kt=async()=>{f(!0);const t=N.loading("Yadda saxlanılır...");try{if(Y==="extract"){const a=await fetch("/api/save-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error(await a.text());localStorage.setItem(vs,Date.now().toString())}else if(Y==="events"){const a=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)});if(!a.ok)throw new Error(await a.text())}else if(Y==="news"){const a=await fetch("/api/news",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)});if(!a.ok)throw new Error(await a.text())}else if(Y==="drivers"){const a=await fetch("/api/drivers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(!a.ok)throw new Error(await a.text())}else if(Y==="videos"){const a=await fetch("/api/videos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)});if(!a.ok)throw new Error(await a.text())}else if(Y==="photos"){const a=await fetch("/api/gallery-photos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(at)});if(!a.ok)throw new Error(await a.text())}N.success("Dəyişikliklər bulud bazasına qeyd edildi!",{id:t}),await Gt()}catch(a){console.error("Save error:",a),N.error(`Yadda saxlama xətası: ${a.message} `,{id:t})}finally{f(!1)}},Us=t=>{const a=xe.find(r=>r.id===t);a&&(Qe(t),Xe({...a}))},ie=(t,a,r)=>{const d=r||Ce;Xe(o=>{const S=!r||r===Ce?{...o,[t]:a}:o;return d&&Ze(k=>k.map(y=>y.id===d?{...y,[t]:a}:y)),S})},Hs=()=>{const t=xe.length>0?Math.max(...xe.map(r=>r.id))+1:1,a={id:t,title:"Yeni Tədbir",date:new Date().toISOString().split("T")[0],location:"Bakı",category:"OFFROAD",img:"https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?q=80&w=2070&auto=format&fit=crop",description:"",rules:"",status:"planned"};Ze([...xe,a]),Qe(t),Xe(a),N.success("Yeni tədbir yaradıldı")},Ws=async(t,a)=>{a.stopPropagation(),window.confirm("Bu tədbiri silmək istədiyinizə əminsiniz?")&&(Ze(xe.filter(r=>r.id!==t)),Ce===t&&Qe(null),N.success("Tədbir silindi"))},Ks=t=>{const a=me.find(r=>r.id===t);a&&(et(t),tt({...a}))},Se=(t,a,r)=>{const d=r||Te;tt(o=>{const S=!r||r===Te?{...o,[t]:a}:o;return d&&Je(k=>k.map(y=>y.id===d?{...y,[t]:a}:y)),S})},Vs=()=>{const t=me.length>0?Math.max(...me.map(r=>r.id))+1:1,a={id:t,title:"Yeni Xəbər",date:new Date().toISOString().split("T")[0],img:"https://images.unsplash.com/photo-1503376780353-7e6692767b70?q=80&w=2070&auto=format&fit=crop",description:"",category:"BLOQ",status:"draft"};Je([...me,a]),et(t),tt(a),N.success("Yeni xəbər yaradıldı")},Jt=t=>{yt(t);const a=he.find(r=>r.id===t);a&&bt({...a})},lt=(t,a,r)=>{const d=Be;bt(o=>{let S={...o,[t]:a};if(t==="youtubeUrl"){const k=es(a);k&&(S={...S,videoId:k,thumbnail:`https://img.youtube.com/vi/${k}/maxresdefault.jpg`})}return d&&st(k=>k.map(y=>{if(y.id===d){let R={...y,[t]:a};if(t==="youtubeUrl"){const W=es(a);W&&(R.videoId=W,R.thumbnail=`https://img.youtube.com/vi/${W}/maxresdefault.jpg`)}return R}return y})),S})},es=t=>{const a=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,r=t.match(a);return r&&r[2].length===11?r[2]:null},ts=t=>{qt(t);const a=at.find(r=>r.id===t);a&&Nt({...a})},Zs=()=>{const t=Date.now(),a={id:t,title:"Yeni Şəkil",url:""};it(r=>[...r,a]),ts(t)},Qs=async(t,a)=>{a.stopPropagation(),window.confirm("Bu şəkli silmək istədiyinizə əminsiniz?")&&(it(r=>r.filter(d=>d.id!==t)),Pe===t&&(qt(null),Nt({})),N.success("Şəkil silindi"))},wt=(t,a)=>{Nt(r=>{const d={...r,[t]:a};return Pe&&it(o=>o.map(h=>h.id===Pe?d:h)),d})},Xs=async t=>{const a=t.target.files?.[0];if(!a)return;const r=await Oe(a);r&&wt("url",r)},Js=()=>{const t=he.length>0?Math.max(...he.map(r=>r.id))+1:1,a={id:t,title:"Yeni Video",youtubeUrl:"",videoId:"",duration:"00:00",thumbnail:"",created_at:new Date().toISOString()};st([...he,a]),yt(t),bt(a),N.success("Yeni video əlavə edildi")},ea=async(t,a)=>{a.stopPropagation(),window.confirm("Bu videonu silmək istədiyinizə əminsiniz?")&&(st(he.filter(r=>r.id!==t)),Be===t&&yt(null),N.success("Video silindi"))},ta=async(t,a)=>{a.stopPropagation(),window.confirm("Bu xəbəri silmək istədiyinizə əminsiniz?")&&(Je(me.filter(r=>r.id!==t)),Te===t&&et(null),N.success("Xəbər silindi"))},sa=t=>{$e(t),Ye(null),ze({})},aa=t=>{Ye(t);const r=ae.find(d=>d.id===H)?.drivers.find(d=>d.id===t);r&&ze({...r})},Ne=(t,a)=>{!H||!Re||ze(r=>{const d={...r,[t]:a};return je(o=>o.map(h=>h.id===H?{...h,drivers:h.drivers.map(S=>S.id===Re?d:S)}:h)),d})},ia=()=>{if(!H){N.error("Öncə kateqoriya seçin və ya yaradın");return}const t=Date.now(),a={id:t,rank:99,name:"Yeni Sürücü",license:"PILOT LICENSE",team:"TEAM NAME",wins:0,points:0,img:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=400&fit=crop"};je(r=>r.map(d=>d.id===H?{...d,drivers:[...d.drivers,a]}:d)),Ye(t),ze(a),N.success("Yeni sürücü siyahıya əlavə edildi")},ra=t=>{window.confirm("Bu sürücünü silmək istədiyinizə əminsiniz?")&&(je(a=>a.map(r=>r.id===H?{...r,drivers:r.drivers.filter(d=>d.id!==t)}:r)),Re===t&&(Ye(null),ze({})),N.success("Sürücü silindi"))},na=async()=>{const t=X,a=ae.map(d=>d.id===H?{...d,drivers:d.drivers.map(o=>o.id===Re?{...o,...t}:o)}:d);f(!0);const r=N.loading("Yadda saxlanılır...");try{if(!(await fetch("/api/drivers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Yadda saxlama uğursuz oldu");je(a),N.success("Bütün sürücü məlumatları qeyd edildi",{id:r})}catch{N.error("Xəta baş verdi",{id:r})}finally{f(!1)}},la=()=>{const t=window.prompt("Kateqoriya adı (Məs: UNLIMITED CLASS):");if(!t)return;const a=t.toLowerCase().replace(/[^a-z0-9]+/g,"-");if(ae.find(d=>d.id===a)){N.error("Bu adda kateqoriya artıq mövcuddur");return}const r={id:a,name:t,drivers:[]};je([...ae,r]),$e(a),N.success("Kateqoriya əlavə edildi")},oa=()=>{if(!H)return;const t=ae.find(a=>a.id===H);if(t&&window.confirm(`"${t.name}" kateqoriyasını və içindəki bütün sürücüləri silmək istədiyinizə əminsiniz?`)){const a=ae.filter(r=>r.id!==H);je(a),a.length>0?$e(a[0].id):$e(null),Ye(null),ze({}),N.success("Kateqoriya silindi")}};if(s.length===0&&!p&&!localStorage.getItem("forsaj_extracted"))return e.jsx("div",{className:"extractor-overlay",children:e.jsxs("div",{className:"extractor-card fade-in",children:[e.jsx(re,{size:64,className:"text-primary",style:{marginBottom:"1.5rem"}}),e.jsx("h2",{children:"Sayt Məzmununu və Görselləri Çıxarın"}),e.jsx("p",{children:"Front-end layihənizdəki bütün səhifələri, mətnləri və şəkilləri avtomatik olaraq bu panelə yükləyin."}),e.jsx("button",{className:"extract-btn",onClick:Ut,children:"Sinxronizasiyanı Başlat"})]})});if(p)return e.jsx("div",{className:"extractor-overlay",children:e.jsxs("div",{className:"extractor-card",children:[e.jsx("div",{className:"loader-ring",style:{marginBottom:"1.5rem"}}),e.jsx("h2",{children:"Avtomatik Sinxronizasiya"}),e.jsx("p",{children:"Zəhmət olmasa gözləyin, front-end məlumatları oxunur..."}),e.jsx("div",{className:"progress-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${v}%`}})}),e.jsx("div",{className:"step-label",children:T})]})});const M=s[n],ss=gs(Ee).map(t=>{const a=s.findIndex(r=>r.id===t);return a===-1?null:{page:s[a],pageIdx:a}}).filter(Boolean),da=!!Ee&&(!!Me[Ee]||!!Ls[Ee]),ca=Y==="extract"&&da&&ss.length>0,as=(M?.sections||[]).filter(t=>M?.id==="about"&&ht(t.id)||M?.id==="partners"&&(Et.test(t.id)||t.id==="SECTION_TITLE")||!we(t)&&ms(t.value)?!1:!G||t.label.toLowerCase().includes(G.toLowerCase())||t.value.toLowerCase().includes(G.toLowerCase())).sort((t,a)=>V(t.order,0)-V(a.order,0)),is=M?.id==="about"?(()=>{const t=new Map;(M.sections||[]).forEach(d=>{if(!ht(d.id))return;const o=_i(d.id)||d.id,h=t.get(o)||{label:"",value:""};d.id.startsWith(Ae)&&(h.label=d.value||""),d.id.startsWith(Ie)&&(h.value=d.value||""),t.set(o,h)});const a=Array.from(t.entries()).sort(([d],[o])=>d.localeCompare(o,void 0,{numeric:!0})).map(([d,o])=>({suffix:d,...o}));if(!G)return a;const r=G.toLowerCase();return a.filter(d=>d.label.toLowerCase().includes(r)||d.value.toLowerCase().includes(r))})():[],rs=M?.id==="partners"?qe(M):[],ot=(M?.images||[]).filter(t=>!G||t.alt.toLowerCase().includes(G.toLowerCase())||t.path.toLowerCase().includes(G.toLowerCase())).sort((t,a)=>V(t.order,0)-V(a.order,0)),pa=t=>{const a=(t.value||"").toLowerCase();return a.includes("<p")||a.includes("<br")||a.includes("[b]")||a.includes("[i]")||a.includes("[u]")||a.includes("[url")||a.includes("[img")||a.includes("[center]")};return e.jsxs("div",{className:"visual-editor fade-in",children:[e.jsxs("div",{className:"editor-header",children:[e.jsxs("div",{className:"header-top-row",children:[e.jsx("div",{className:"header-info",children:e.jsxs("h1",{children:[e.jsx(re,{size:20})," Admin Panel"]})}),e.jsxs("div",{className:"header-search-container",children:[e.jsx(Bt,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),e.jsx("input",{placeholder:"Komponentləri və məzmunu axtar...",type:"text",value:G,onChange:t=>Ms(t.target.value),className:"header-search-input"})]}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{className:`save-btn ${x?"saving":""}`,onClick:kt,disabled:x,children:x?"Gözləyin...":e.jsxs(e.Fragment,{children:[e.jsx(Pt,{size:16})," Saxla"]})})})]}),e.jsxs("div",{className:"mode-switcher",children:[e.jsx("button",{className:`mode-btn ${Y==="extract"?"active":""}`,onClick:()=>se("extract"),children:"Sayt Məzmunu"}),e.jsx("button",{className:`mode-btn ${Y==="events"?"active":""}`,onClick:()=>se("events"),children:"Tədbirlər"}),e.jsx("button",{className:`mode-btn ${Y==="news"?"active":""}`,onClick:()=>se("news"),children:"Xəbərlər"}),e.jsx("button",{className:`mode-btn ${Y==="drivers"?"active":""}`,onClick:()=>se("drivers"),children:"Sürücülər"}),e.jsx("button",{className:`mode-btn ${Y==="videos"?"active":""}`,onClick:()=>se("videos"),children:"Videolar"}),e.jsx("button",{className:`mode-btn ${Y==="photos"?"active":""}`,onClick:()=>se("photos"),children:"Fotolar"})]})]}),Y==="news"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Xəbərlər"}),e.jsx("button",{className:"add-section-btn",onClick:Vs,children:e.jsx(Z,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 300px)"},children:me.length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem",border:"1px dashed #e2e8f0",borderRadius:"8px"},children:'Hələ heç bir xəbər yoxdur. Yeni xəbər yaratmaq üçün yuxarıdakı "+" düyməsini basın.'}):me.map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${Te===t.id?"active":""}`,onClick:()=>Ks(t.id),style:{width:"100%",paddingRight:"40px",textAlign:"left"},children:[e.jsx(We,{size:14})," ",t.title,e.jsx("div",{style:{fontSize:"10px",color:"#999",marginLeft:"24px"},children:t.date})]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>ta(t.id,a),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(te,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:Te!==null&&U.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsxs("h2",{style:{fontSize:"2rem",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(We,{size:22})," Xəbəri Redaktə Et"]}),e.jsxs("p",{style:{color:"#64748b"},children:[U.title," // ID: ",U.id]})]}),e.jsxs("div",{className:"edit-grid grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"BAŞLIQ (AZ)"}),e.jsx("input",{type:"text",value:U.title,onChange:t=>Se("title",t.target.value,U.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TARİX"}),e.jsx("input",{type:"date",value:U.date,onChange:t=>Se("date",t.target.value,U.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"KATEQORİYA"}),e.jsx("input",{type:"text",value:U.category,onChange:t=>Se("category",t.target.value,U.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"VƏZİYYƏT"}),e.jsxs("select",{value:U.status,onChange:t=>Se("status",t.target.value,U.id),children:[e.jsx("option",{value:"draft",children:"Qaralama"}),e.jsx("option",{value:"published",children:"Dərc edilib"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"ŞƏKİL"}),e.jsxs("div",{className:"input-row",children:[e.jsx("input",{type:"text",value:U.img,onChange:t=>Se("img",t.target.value,U.id)}),e.jsx("input",{type:"file",id:"news-full-img",style:{display:"none"},onChange:async t=>{const a=t.target.files?.[0];if(a){const r=await Oe(a);r&&Se("img",r,U.id)}}}),e.jsx("button",{onClick:()=>document.getElementById("news-full-img")?.click(),className:"btn-secondary",children:"Yüklə"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"MƏZMUN"}),e.jsx(pt,{id:"news-full-desc",value:U.description||"",onChange:t=>Se("description",t,U.id)})]})]}),e.jsx("div",{className:"editor-savebar",children:e.jsx("button",{className:"btn-primary",onClick:kt,children:"Yadda Saxla"})})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(We,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən xəbər seçin və ya yeni yaradın."})]})})]}):Y==="events"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Tədbirlər"}),e.jsx("button",{className:"add-section-btn",onClick:Hs,children:e.jsx(Z,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 300px)"},children:xe.length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem",border:"1px dashed #e2e8f0",borderRadius:"8px"},children:'Hələ heç bir tədbir yoxdur. Yeni tədbir yaratmaq üçün yuxarıdakı "+" düyməsini basın.'}):xe.map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${Ce===t.id?"active":""}`,onClick:()=>Us(t.id),style:{width:"100%",paddingRight:"40px",textAlign:"left"},children:[e.jsx(xt,{size:14})," ",t.title,e.jsx("div",{style:{fontSize:"10px",color:"#999",marginLeft:"24px"},children:t.date})]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>Ws(t.id,a),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(te,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:Ce!==null&&L.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsxs("h2",{style:{fontSize:"2rem",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(xt,{size:22})," Tədbiri Redaktə Et"]}),e.jsxs("p",{style:{color:"#64748b"},children:[L.title," // ID: ",L.id]})]}),e.jsxs("div",{className:"edit-grid grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TƏDBİR ADI"}),e.jsx("input",{type:"text",value:L.title,onChange:t=>ie("title",t.target.value,L.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TARİX"}),e.jsx("input",{type:"date",value:L.date,onChange:t=>ie("date",t.target.value,L.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"MƏKAN"}),e.jsx("input",{type:"text",value:L.location,onChange:t=>ie("location",t.target.value,L.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"KATEQORİYA"}),e.jsx("input",{type:"text",value:L.category,onChange:t=>ie("category",t.target.value,L.id)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"VƏZİYYƏT"}),e.jsxs("select",{value:L.status,onChange:t=>ie("status",t.target.value,L.id),children:[e.jsx("option",{value:"planned",children:"Gələcək"}),e.jsx("option",{value:"past",children:"Keçmiş"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"ŞƏKİL"}),e.jsxs("div",{className:"input-row",children:[e.jsx("input",{type:"text",value:L.img,onChange:t=>ie("img",t.target.value,L.id)}),e.jsx("input",{type:"file",id:"event-full-img",style:{display:"none"},onChange:async t=>{const a=t.target.files?.[0];if(a){const r=await Oe(a);r&&ie("img",r,L.id)}}}),e.jsx("button",{onClick:()=>document.getElementById("event-full-img")?.click(),className:"btn-secondary",children:"Yüklə"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"TƏSVİR"}),e.jsx(pt,{id:"event-full-desc",value:L.description||"",onChange:t=>ie("description",t,L.id)})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"PDF URL"}),e.jsxs("div",{className:"input-row",children:[e.jsx("input",{type:"text",value:L.pdfUrl||"",onChange:t=>ie("pdfUrl",t.target.value,L.id),placeholder:"https://.../rules.pdf"}),e.jsx("input",{type:"file",id:"event-full-pdf",accept:".pdf,application/pdf",style:{display:"none"},onChange:async t=>{const a=t.target.files?.[0];if(!a)return;if(a.type!=="application/pdf"&&!a.name.toLowerCase().endsWith(".pdf")){N.error("Yalnız PDF faylı yüklənə bilər");return}const r=await Xt(a,{loadingText:"PDF yüklənir...",successText:"PDF uğurla yükləndi",errorText:"PDF yüklənərkən xəta baş verdi"});r&&ie("pdfUrl",r,L.id),t.target.value=""}}),e.jsx("button",{type:"button",onClick:()=>document.getElementById("event-full-pdf")?.click(),className:"btn-secondary",children:"PDF Yüklə"})]})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{children:"QAYDALAR"}),e.jsx(pt,{id:"event-full-rules",value:L.rules||"",onChange:t=>ie("rules",t,L.id)})]})]}),e.jsx("div",{className:"editor-savebar",children:e.jsx("button",{className:"btn-primary",onClick:kt,children:"Yadda Saxla"})})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(xt,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən tədbir seçin və ya yeni yaradın."})]})})]}):Y==="drivers"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Kateqoriyalar"}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{className:"add-section-btn",onClick:la,title:"Kateqoriya əlavə et",children:e.jsx(Z,{size:16})}),e.jsx("button",{className:"delete-section-btn",onClick:oa,title:"Seçilmiş kateqoriyanı sil",style:{background:"none",border:"none",color:"#ff4d4f",cursor:"pointer",padding:"4px"},children:e.jsx(te,{size:16})})]})]}),e.jsx("select",{value:H||"",onChange:t=>sa(t.target.value),style:{width:"100%",padding:"10px",marginBottom:"1.5rem",borderRadius:"8px",border:"1px solid #e2e8f0",background:"white",fontWeight:"bold"},children:ae.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Sürücülər"}),e.jsx("button",{className:"add-section-btn",onClick:ia,children:e.jsx(Z,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 400px)"},children:H&&ae.find(t=>t.id===H)?.drivers.length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem"},children:"Bu kateqoriyada sürücü yoxdur."}):ae.find(t=>t.id===H)?.drivers.map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${Re===t.id?"active":""}`,onClick:()=>aa(t.id),style:{width:"100%",paddingRight:"40px",textAlign:"left"},children:[e.jsxs("span",{style:{fontWeight:"900",color:"var(--primary)",marginRight:"8px"},children:["#",t.rank]})," ",t.name]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>{a.stopPropagation(),ra(t.id)},style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(te,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:Re!==null&&X.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsx("h2",{style:{fontSize:"2rem"},children:X.name}),e.jsxs("p",{style:{color:"#64748b"},children:[ae.find(t=>t.id===H)?.name," // RANK #",X.rank]})]}),e.jsxs("div",{className:"edit-grid grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"SÜRÜCÜNÜN ADI VƏ SOYADI"}),e.jsx("input",{type:"text",value:X.name,onChange:t=>Ne("name",t.target.value),placeholder:"Məs: Əli Məmmədov",style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"16px",fontWeight:"bold"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"YARIŞ SIRALAMASI (RANK)"}),e.jsx("input",{type:"number",value:X.rank,readOnly:!0,style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"16px",background:"#f8fafc",color:"#94a3b8",cursor:"not-allowed"}}),e.jsx("p",{style:{fontSize:"11px",color:"#3b82f6",marginTop:"6px",fontWeight:"bold"},children:"ℹ️ Bu sıra ballara görə avtomatik hesablanır"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"PİLOT LİSENZİYASI"}),e.jsx("input",{type:"text",value:X.license,onChange:t=>Ne("license",t.target.value),placeholder:"Məs: A-SİNFİ",style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"15px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"TƏMSİL ETDİYİ KOMANDA"}),e.jsx("input",{type:"text",value:X.team,onChange:t=>Ne("team",t.target.value),placeholder:"Məs: FORSAJ RACING",style:{width:"100%",padding:"14px",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"15px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"QALİBİYYƏT (WINS)"}),e.jsx("input",{type:"number",value:X.wins,onChange:t=>Ne("wins",parseInt(t.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"XAL (POINTS)"}),e.jsx("input",{type:"number",value:X.points,onChange:t=>Ne("points",parseInt(t.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group full-span",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"PİLOT ŞƏKLİ"}),e.jsxs("div",{className:"input-row",children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",overflow:"hidden",background:"#f1f5f9",border:"2px solid var(--primary)"},children:X.img?e.jsx("img",{src:X.img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(de,{size:24,style:{opacity:.2}})})}),e.jsxs("div",{className:"input-row",style:{flex:1},children:[e.jsx("input",{type:"text",value:X.img||"",onChange:t=>Ne("img",t.target.value),placeholder:"Şəkil URL və ya yol...",style:{flex:1,padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),e.jsx("input",{type:"file",id:"driver-img-upload",style:{display:"none"},accept:"image/*",onChange:async t=>{const a=t.target.files?.[0];if(a){const r=await Oe(a);r&&Ne("img",r)}}}),e.jsx("button",{onClick:()=>document.getElementById("driver-img-upload")?.click(),style:{background:"#f1f5f9",border:"1px solid #e2e8f0",padding:"12px",borderRadius:"8px",cursor:"pointer"},children:"Yüklə"})]})]})]})]}),e.jsx("div",{className:"editor-savebar",children:e.jsx("button",{className:"btn-primary",onClick:na,disabled:x,children:x?"Gözləyin...":"Sürücünü Yadda Saxla"})})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(He,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən sürücü seçin."})]})})]}):Y==="videos"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Videolar"}),e.jsx("button",{className:"add-section-btn",onClick:Js,children:e.jsx(Z,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 300px)"},children:he.length===0?e.jsx("div",{style:{padding:"2rem 1rem",textAlign:"center",color:"#94a3b8",fontSize:"0.875rem"},children:"Heç bir video əlavə edilməyib."}):he.map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${Be===t.id?"active":""}`,onClick:()=>Jt(t.id),style:{width:"100%",paddingRight:"40px",textAlign:"left",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"24px",height:"16px",background:"#333",borderRadius:"2px",overflow:"hidden"},children:t.thumbnail&&e.jsx("img",{src:t.thumbnail,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsx("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.title})]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>{a.stopPropagation(),ea(t.id,a)},style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(te,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:Be!==null&&J.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsx("h2",{style:{fontSize:"2rem"},children:"Video Redaktəsi"}),e.jsxs("p",{style:{color:"#64748b"},children:[J.title," // ID: ",J.id]})]}),e.jsxs("div",{className:"edit-grid grid-1",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"VİDEO BAŞLIĞI"}),e.jsx("input",{type:"text",value:J.title,onChange:t=>lt("title",t.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",fontWeight:"bold"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"YOUTUBE URL"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(re,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),e.jsx("input",{type:"text",value:J.youtubeUrl,onChange:t=>lt("youtubeUrl",t.target.value),placeholder:"https://www.youtube.com/watch?v=...",style:{width:"100%",padding:"12px 12px 12px 40px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsx("p",{style:{fontSize:"11px",color:"#64748b",marginTop:"6px"},children:"YouTube linkini daxil etdikdə şəkil və ID avtomatik təyin olunacaq."})]}),e.jsxs("div",{className:"edit-grid grid-2-compact",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"MÜDDƏT (MƏS: 05:20)"}),e.jsx("input",{type:"text",value:J.duration,onChange:t=>lt("duration",t.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"VİDEO ID (AVTOMATİK)"}),e.jsx("input",{type:"text",value:J.videoId,readOnly:!0,style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",background:"#f8fafc",color:"#94a3b8"}})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"YARADILMA TARİXİ"}),e.jsx("input",{type:"text",value:J.created_at||"",onChange:t=>lt("created_at",t.target.value),placeholder:"2026-02-16T10:30:00.000Z",style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"ÖNİZLƏMƏ (THUMBNAIL)"}),e.jsxs("div",{style:{width:"100%",aspectRatio:"16/9",borderRadius:"12px",overflow:"hidden",background:"#000",border:"1px solid #e2e8f0",position:"relative"},children:[J.thumbnail?e.jsx("img",{src:J.thumbnail,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[e.jsx(zt,{size:48,style:{opacity:.1,color:"white"}}),e.jsx("p",{style:{color:"#64748b",fontSize:"12px"},children:"YouTube linki daxil edin"})]}),J.videoId&&e.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.3)",cursor:"pointer"},onClick:()=>window.open(J.youtubeUrl,"_blank"),children:e.jsx("div",{style:{background:"#FF4D00",color:"white",padding:"12px",borderRadius:"50%",boxShadow:"0 0 20px rgba(255,77,0,0.4)"},children:e.jsx(Ta,{size:24,fill:"currentColor"})})})]})]})]})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(zt,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən video seçin və ya yeni əlavə edin."})]})})]}):Y==="photos"?e.jsxs("div",{className:"editor-layout with-sidebar",children:[e.jsxs("aside",{className:"page-list",children:[e.jsxs("div",{className:"list-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{children:"Foto Arxiv"}),e.jsx("button",{className:"add-section-btn",onClick:Zs,title:"Yeni şəkil əlavə et",children:e.jsx(Z,{size:16})})]}),e.jsx("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 200px)"},children:at.length===0?e.jsx("p",{style:{padding:"20px",color:"#94a3b8",textAlign:"center",fontSize:"13px"},children:"Şəkil yoxdur"}):at.map(t=>e.jsxs("div",{className:"page-nav-wrapper",style:{position:"relative",marginBottom:"4px"},children:[e.jsxs("button",{className:`page-nav-item ${Pe===t.id?"active":""}`,onClick:()=>ts(t.id),style:{width:"100%",paddingRight:"40px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"4px",overflow:"hidden",flexShrink:0,background:"#eee"},children:t.url?e.jsx("img",{src:t.url,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(de,{size:12,style:{margin:"6px",opacity:.3}})}),e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.title})]}),e.jsx("button",{className:"delete-section-btn",onClick:a=>Qs(t.id,a),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ff4d4f",opacity:.5,cursor:"pointer"},children:e.jsx(te,{size:14})})]},t.id))})]}),e.jsx("main",{className:"editor-canvas editor-canvas-flat",children:Pe!==null&&be.id!==void 0?e.jsxs("div",{className:"editor-workspace",children:[e.jsxs("div",{className:"canvas-header canvas-header-block",children:[e.jsx("h2",{style:{fontSize:"2rem"},children:"Şəkil Redaktəsi"}),e.jsxs("p",{style:{color:"#64748b"},children:[be.title," // ID: ",be.id]})]}),e.jsxs("div",{className:"edit-grid grid-1",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"ŞƏKİL BAŞLIĞI"}),e.jsx("input",{type:"text",value:be.title,onChange:t=>wt("title",t.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",fontWeight:"bold"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"12px",color:"#64748b"},children:"FOTO"}),e.jsxs("div",{style:{width:"100%",minHeight:"300px",borderRadius:"12px",overflow:"hidden",background:"#f8fafc",border:"1px dashed #cbd5e1",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[be.url?e.jsx("img",{src:be.url,alt:"",style:{maxWidth:"100%",maxHeight:"400px",objectFit:"contain"}}):e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[e.jsx(de,{size:48,style:{opacity:.1}}),e.jsx("p",{style:{color:"#64748b",fontSize:"12px"},children:"Şəkil seçilməyib"})]}),e.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"1rem"},children:[e.jsx("input",{type:"file",id:"gallery-photo-upload",style:{display:"none"},accept:"image/*",onChange:Xs}),e.jsxs("button",{onClick:()=>document.getElementById("gallery-photo-upload")?.click(),className:"btn-primary",style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Z,{size:18})," Şəkil Yüklə"]}),e.jsx("input",{type:"text",value:be.url||"",onChange:t=>wt("url",t.target.value),placeholder:"URL və ya yol...",style:{padding:"10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px",width:"250px"}})]})]})]})]})]}):e.jsxs("div",{className:"editor-empty",children:[e.jsx(de,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən şəkil seçin və ya yeni əlavə edin."})]})})]}):e.jsx("div",{className:"editor-layout",children:e.jsx("main",{className:"editor-canvas",style:{width:"100%"},children:ca?e.jsx("div",{className:"edit-fields",style:{width:"100%"},children:ss.map(({page:t,pageIdx:a})=>{const r=(t.sections||[]).filter(o=>Li()).sort((o,h)=>V(o.order,0)-V(h.order,0)),d=(t.images||[]).sort((o,h)=>V(o.order,0)-V(h.order,0));return e.jsxs("div",{className:"field-group",children:[e.jsx("div",{className:"canvas-header",children:e.jsx("h2",{style:{fontSize:"1.05rem",fontWeight:800,color:"var(--text-main)"},children:Rt[t.id]||t.title})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.9rem"},children:r.map(o=>{const h=we(o),S=Le(o,"value"),k=Le(o,"url"),y=!!o.url?.trim();return e.jsxs("div",{className:"field-item-wrapper",style:{position:"relative",background:"#fcfcfd",padding:"1rem",borderRadius:"12px",border:"1px solid #f0f0f2"},children:[e.jsx("div",{style:{fontSize:"11px",color:"#64748b",fontWeight:700,marginBottom:"6px"},children:h?hs(h):o.label}),e.jsx("textarea",{rows:3,value:o.value,disabled:!S,onChange:R=>oe(a,o.id,"value",R.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",lineHeight:1.4,resize:"vertical"}}),y&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"0.75rem"},children:[e.jsx(re,{size:14,style:{color:"#94a3b8"}}),e.jsx("input",{type:"text",value:o.url||"",disabled:!k,onChange:R=>oe(a,o.id,"url",R.target.value),onBlur:()=>Ht(a,o.id),placeholder:"https://example.com/path",style:{fontSize:"12px",padding:"6px 10px",border:"1px solid #e2e8f0",borderRadius:"6px",flex:1}})]}),!y&&k&&e.jsxs("button",{type:"button",className:"add-field-minimal",onClick:()=>oe(a,o.id,"url",`${window.location.origin}/`),style:{marginTop:"0.75rem"},children:[e.jsx(Z,{size:14})," Link əlavə et"]})]},`${t.id}-${o.id}`)})}),e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:700,marginBottom:"8px"},children:"Şəkillər"}),e.jsxs("div",{className:"images-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:"1rem"},children:[d.length===0&&e.jsx("div",{className:"empty-fields-tip",style:{gridColumn:"1/-1",textAlign:"center",padding:"1rem",border:"1px dashed #cbd5e1",borderRadius:"10px",color:"#64748b"},children:"Bu bölmədə şəkil yoxdur."}),d.map(o=>e.jsxs("div",{className:"image-edit-card",style:{border:"1px solid #eee",borderRadius:"12px",padding:"0.75rem",background:"#fff"},children:[e.jsx("input",{type:"text",value:o.path,placeholder:"Tam şəkil linki",onChange:h=>{const S=[...s],k=S[a];if(!k)return;const y=k.images.findIndex(R=>R.id===o.id);y!==-1&&(k.images[y].path=h.target.value,i(S))},style:{width:"100%",fontSize:"12px",padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:"6px",marginBottom:"8px"}}),e.jsx("input",{type:"text",value:o.alt,placeholder:"Alt mətni",onChange:h=>Wt(a,o.id,h.target.value),style:{width:"100%",fontSize:"12px",padding:"8px 10px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]},`${t.id}-${o.id}`))]})]})]},t.id)})}):M?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"canvas-header",children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:800,color:"var(--text-main)"},children:Rt[M.id]||M.title}),e.jsxs("div",{className:"canvas-actions",children:[M.id==="about"&&e.jsxs("button",{className:"add-field-minimal",onClick:Vt,style:{background:"#f5f3ff",color:"#7c3aed",border:"1px solid #ddd6fe"},children:[e.jsx(He,{size:14})," Statistika Əlavə Et"]}),M.id==="values"&&e.jsxs("button",{className:"add-field-minimal",onClick:()=>{Fe("text","İkon Kodu (Shield/Users/Leaf/Zap)",`val-icon-${Date.now()}`),Fe("text","Dəyər Başlığı",`val-title-${Date.now()}`),Fe("text","Dəyər Təsviri",`val-desc-${Date.now()}`)},style:{background:"#f0fdf4",color:"#16a34a",border:"1px solid #bbf7d0"},children:[e.jsx(Z,{size:14})," Yeni Dəyər Əlavə Et"]}),e.jsx("div",{style:{width:"1px",height:"24px",background:"#e2e8f0",margin:"0 4px"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"#f8fafc",padding:"4px 12px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:800,color:"#64748b"},children:"VƏZİYYƏT:"}),e.jsx("button",{onClick:()=>{const t=[...s];t[n].active=M?.active===!1,i(t),N.success(t[n].active?"Bölmə aktivləşdirildi":"Bölmə deaktiv edildi")},style:{width:"36px",height:"18px",borderRadius:"9px",background:M?.active!==!1?"#10b981":"#cbd5e1",position:"relative",cursor:"pointer",border:"none",transition:"background 0.3s"},children:e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:"white",position:"absolute",top:"2px",left:M?.active!==!1?"20px":"2px",transition:"left 0.3s"}})})]})]})]}),e.jsxs("div",{className:"edit-fields",children:[M.id==="about"&&e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(He,{size:16})," Statistikalar"]}),e.jsxs("button",{className:"add-field-minimal",onClick:Vt,children:[e.jsx(Z,{size:14})," Yeni Statistika"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:is.length>0?is.map(t=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 180px auto",gap:"8px",alignItems:"center",padding:"10px",border:"1px solid #e2e8f0",borderRadius:"10px",background:"#fff"},children:[e.jsx("input",{type:"text",value:t.label,onChange:a=>Zt(t.suffix,"label",a.target.value),placeholder:"Statistika adı (Məs: PİLOTLAR)",style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",fontWeight:700}}),e.jsx("input",{type:"text",value:t.value,onChange:a=>Zt(t.suffix,"value",a.target.value),placeholder:"Dəyər (Məs: 140+)",style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",fontWeight:700}}),e.jsx("button",{onClick:()=>Ps(t.suffix),title:"Statistikanı sil",style:{background:"#fff",border:"1px solid #fee2e2",color:"#ef4444",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(te,{size:14})})]},t.suffix)):e.jsx("div",{style:{padding:"1rem",border:"1px dashed #cbd5e1",borderRadius:"8px",color:"#64748b",fontSize:"13px"},children:G?"Axtarışa uyğun statistika tapılmadı.":'Hələ statistika yoxdur. "Yeni Statistika" ilə əlavə edin.'})})]}),M.id==="partners"&&e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(He,{size:16})," Tərəfdaş Kartları"]}),e.jsxs("button",{className:"add-field-minimal",onClick:$s,children:[e.jsx(Z,{size:14})," Tərəfdaş Əlavə Et"]})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",color:"#64748b",marginBottom:"6px",fontWeight:700},children:"Bölmə Başlığı"}),e.jsx("input",{type:"text",value:M.sections.find(t=>t.id==="SECTION_TITLE")?.value||"",onChange:t=>oe(n,"SECTION_TITLE","value",t.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",fontWeight:700}})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:rs.map((t,a)=>{const r=a>0,d=a<rs.length-1;return e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"10px",padding:"12px",background:"#fff"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 200px auto",gap:"8px",marginBottom:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:t.name,onChange:o=>Ge(t.index,"name",o.target.value),placeholder:"Tərəfdaş adı",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("input",{type:"text",value:t.tag,onChange:o=>Ge(t.index,"tag",o.target.value),placeholder:"Etiket",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx("input",{type:"text",value:t.icon,onChange:o=>Ge(t.index,"icon",o.target.value),placeholder:"ShieldCheck / Truck / Globe / Zap",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsx("button",{title:"Yuxarı",onClick:()=>Qt(t.index,"up"),disabled:!r,style:{width:"30px",height:"30px",border:"1px solid #e2e8f0",background:"#fff",borderRadius:"8px",color:r?"#334155":"#cbd5e1"},children:e.jsx(It,{size:14})}),e.jsx("button",{title:"Aşağı",onClick:()=>Qt(t.index,"down"),disabled:!d,style:{width:"30px",height:"30px",border:"1px solid #e2e8f0",background:"#fff",borderRadius:"8px",color:d?"#334155":"#cbd5e1"},children:e.jsx(Ct,{size:14})}),e.jsx("button",{title:"Sil",onClick:()=>Ys(t.index),style:{width:"30px",height:"30px",border:"1px solid #fee2e2",background:"#fff",borderRadius:"8px",color:"#ef4444"},children:e.jsx(te,{size:14})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"170px 1fr",gap:"8px",alignItems:"center"},children:[e.jsxs("select",{value:t.useImage,onChange:o=>Ge(t.index,"useImage",o.target.value),style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"},children:[e.jsx("option",{value:"false",children:"İkon istifadə et"}),e.jsx("option",{value:"true",children:"Görsel istifadə et"})]}),e.jsx("input",{type:"text",value:t.imageId,onChange:o=>Ge(t.index,"imageId",o.target.value),placeholder:"Görsel ID (Məs: partner-image-1)",style:{padding:"9px 10px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}})]})]},t.index)})})]}),e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(ks,{size:16})," Mətn Sahələri"]}),e.jsxs("button",{className:"add-field-minimal",onClick:()=>Fe("text"),children:[e.jsx(Z,{size:14})," Mətn Əlavə Et"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:as.length===0&&G?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#94a3b8",fontSize:"0.9rem",border:"1px dashed #e2e8f0",borderRadius:"8px"},children:"Bu səhifədə sorğuya uyğun mətn tapılmadı."}):as.map((t,a)=>{const r=we(t),d=Le(t,"label"),o=Le(t,"value"),h=Le(t,"url"),S=!!(t.url||"").trim(),k=Di(t),y=M?.sections||[],R=y.findIndex(ee=>ee.id===t.id),W=R>0,_e=R>=0&&R<y.length-1;return e.jsxs("div",{className:"field-item-wrapper",style:{background:"#fcfcfd",padding:"1.25rem",borderRadius:"14px",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center",marginBottom:"0.75rem",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",value:ms(t.label)?hs(t.label):t.label,onChange:ee=>oe(n,t.id,"label",ee.target.value),disabled:!d,style:{fontSize:"0.85rem",fontWeight:800,textTransform:"uppercase",color:"var(--primary)",border:"none",background:"none",width:"auto",padding:0}}),r&&e.jsx("span",{style:{fontSize:"10px",color:"#475569",background:"#f1f5f9",borderRadius:"999px",padding:"3px 8px",fontWeight:700},children:"Açar mətn"}),e.jsxs("span",{style:{fontSize:"10px",color:"#94a3b8",fontWeight:700,marginLeft:"auto"},children:["Sıra: ",a+1]})]}),r||!pa(t)?e.jsx("textarea",{value:t.value||"",onChange:ee=>oe(n,t.id,"value",ee.target.value),disabled:!o,rows:4,style:{width:"100%",padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",lineHeight:"1.4",resize:"vertical"}}):e.jsx(pt,{id:`editor-${t.id}`,value:t.value||"",onChange:ee=>oe(n,t.id,"value",ee),readOnly:!o}),S&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"0.75rem"},children:[e.jsx(re,{size:14,style:{color:"#94a3b8"}}),e.jsx("input",{type:"text",value:fs(t.url||""),onChange:ee=>oe(n,t.id,"url",ee.target.value),onBlur:()=>Ht(n,t.id),disabled:!h,placeholder:"URL (Məs: /about veya https://...)",style:{fontSize:"12px",padding:"6px 10px",border:"1px solid #e2e8f0",borderRadius:"6px",flex:1}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"0.9rem"},children:[!S&&h&&e.jsxs("button",{title:"Link əlavə et",onClick:()=>oe(n,t.id,"url",`${window.location.origin}/`),style:{background:"#fff",border:"1px solid #dbeafe",color:"#2563eb",borderRadius:"8px",padding:"6px 10px",display:"flex",alignItems:"center",gap:6,cursor:"pointer",fontSize:"12px"},children:[e.jsx(re,{size:12})," Link əlavə et"]}),e.jsxs("button",{title:"Yuxarı daşı",onClick:()=>rt("text",t.id,"up"),disabled:!W,style:{background:"#fff",border:"1px solid #e2e8f0",color:W?"#334155":"#cbd5e1",borderRadius:"8px",padding:"6px 10px",display:"flex",alignItems:"center",gap:6,cursor:W?"pointer":"not-allowed",fontSize:"12px"},children:[e.jsx(It,{size:12})," Yuxarı"]}),e.jsxs("button",{title:"Aşağı daşı",onClick:()=>rt("text",t.id,"down"),disabled:!_e,style:{background:"#fff",border:"1px solid #e2e8f0",color:_e?"#334155":"#cbd5e1",borderRadius:"8px",padding:"6px 10px",display:"flex",alignItems:"center",gap:6,cursor:_e?"pointer":"not-allowed",fontSize:"12px"},children:[e.jsx(Ct,{size:12})," Aşağı"]}),k&&e.jsxs("button",{className:"field-delete-btn",onClick:()=>Kt("text",t.id),style:{background:"#fff",border:"1px solid #fee2e2",color:"#ef4444",borderRadius:"8px",padding:"6px 10px",display:"flex",alignItems:"center",gap:6,cursor:"pointer",fontSize:"12px"},children:[e.jsx(te,{size:12})," Sil"]})]})]},t.id)})})]}),e.jsxs("div",{className:"field-group",children:[e.jsxs("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("label",{children:[e.jsx(de,{size:16})," Bölmədəki Şəkillər"]}),e.jsxs("button",{className:"add-field-minimal",onClick:()=>Fe("image"),children:[e.jsx(Z,{size:14})," Yeni Şəkil Yeri"]})]}),ot.length>0&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:800,color:"#64748b",marginBottom:"8px"},children:"Komponent Daxili Önizləmə (Sıra ilə)"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:"10px"},children:ot.map((t,a)=>e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"10px",overflow:"hidden",background:"#fff"},children:[e.jsx("div",{style:{height:"84px",background:"#f8fafc"},children:t.path?e.jsx("img",{src:t.path,alt:t.alt||`Preview ${a+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8",fontSize:"11px"},children:"Şəkil yoxdur"})}),e.jsxs("div",{style:{padding:"6px 8px",fontSize:"10px",color:"#475569",fontWeight:700},children:["#",a+1," • ",t.id]})]},`preview-${t.id}`))})]}),e.jsx("div",{className:"images-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:"1.5rem"},children:ot.length>0?ot.map((t,a)=>{const r=M?.images||[],d=r.findIndex(S=>S.id===t.id),o=d>0,h=d>=0&&d<r.length-1;return e.jsxs("div",{className:"image-edit-card",style:{border:"1px solid #eee",borderRadius:"12px",overflow:"hidden",background:"#fff",position:"relative"},children:[e.jsx("button",{className:"field-delete-btn",onClick:()=>Kt("image",t.id),style:{position:"absolute",right:"8px",top:"8px",zIndex:10,background:"rgba(255,255,255,0.9)",border:"1px solid #fee2e2",color:"#ef4444",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(te,{size:12})}),e.jsxs("div",{style:{position:"absolute",right:"40px",top:"8px",zIndex:10,display:"flex",gap:"6px"},children:[e.jsx("button",{title:"Yuxarı daşı",onClick:()=>rt("image",t.id,"up"),disabled:!o,style:{background:"rgba(255,255,255,0.9)",border:"1px solid #e2e8f0",color:o?"#334155":"#cbd5e1",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:o?"pointer":"not-allowed"},children:e.jsx(It,{size:12})}),e.jsx("button",{title:"Aşağı daşı",onClick:()=>rt("image",t.id,"down"),disabled:!h,style:{background:"rgba(255,255,255,0.9)",border:"1px solid #e2e8f0",color:h?"#334155":"#cbd5e1",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:h?"pointer":"not-allowed"},children:e.jsx(Ct,{size:12})})]}),e.jsx("div",{style:{height:"120px",background:"#f8fafc",position:"relative",overflow:"hidden"},children:t.path&&(t.path.startsWith("http")||t.path.startsWith("/"))?e.jsx("img",{src:t.path,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#f1f5f9"},children:[e.jsx(de,{size:32,style:{opacity:.1}}),e.jsx("span",{style:{fontSize:"10px",color:"#999",position:"absolute",bottom:"10px"},children:"Yol yoxdur"})]})}),e.jsxs("div",{style:{padding:"0.75rem"},children:[e.jsxs("div",{style:{fontSize:"10px",color:"#94a3b8",fontWeight:700,marginBottom:"6px"},children:["Sıra: ",a+1]}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem",marginBottom:"4px"},children:[e.jsx("input",{type:"text",placeholder:"Resur yolu...",value:t.path,onChange:S=>{if(n<0||n>=s.length)return;const k=[...s],y=k[n];if(!y)return;const R=y.images.findIndex(W=>W.id===t.id);R!==-1&&(y.images[R].path=S.target.value,i(k))},style:{fontSize:"0.75rem",flex:1,padding:"0.4rem",border:"1px solid #eee",borderRadius:"4px"}}),e.jsx("button",{onClick:()=>Fs(n,t.id),title:"Sistemdən seç",style:{padding:"0 8px",background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer"},children:e.jsx(re,{size:14})}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"file",id:`file-up-${t.id}`,style:{display:"none"},accept:"image/*",onChange:S=>qs(S,n,t.id)}),e.jsx("button",{onClick:()=>document.getElementById(`file-up-${t.id}`)?.click(),title:"Kompüterdən yüklə",style:{padding:"0 8px",height:"100%",background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(Z,{size:14})})]})]}),e.jsx("input",{type:"text",placeholder:"Alt mətni...",value:t.alt,onChange:S=>Wt(n,t.id,S.target.value),style:{fontSize:"0.75rem",width:"100%",padding:"0.4rem",border:"1px solid #eee",borderRadius:"4px"}})]})]},t.id)}):e.jsx("div",{className:"empty-fields-tip",style:{gridColumn:"1/-1",textAlign:"center",padding:"2rem",background:"#f8fafc",borderRadius:"12px",border:"1px dashed #cbd5e1",color:"#64748b"},children:G?"Sorğuya uyğun şəkil tapılmadı.":"Bu bölmədə redaktə ediləcək şəkil yoxdur."})})]}),e.jsxs("div",{className:"field-group",children:[e.jsxs("label",{children:[e.jsx(de,{size:16})," Yeni Şəkil Yüklə"]}),e.jsxs("div",{className:"upload-dropzone",children:[e.jsx(Z,{size:24}),e.jsx("p",{children:"Şəkil yükləmək üçün seçin"}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[e.jsx("button",{className:"btn-secondary",onClick:()=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=async a=>{const r=a.target.files?.[0];if(!r)return;const d=await Oe(r);if(d&&n>=0&&n<s.length){const o=[...s],h=o[n];if(h){const S=`img-${h.images.length}-${Date.now()}`;h.images.push({id:S,path:d,alt:"",type:"local"}),i(o),N.success("Yeni şəkil əlavə edildi")}}},t.click()},children:"Cihazdan Yüklə"}),e.jsx("button",{className:"btn-secondary",onClick:()=>{const t=`img-${(M.images||[]).length}`;q({pageIdx:n,imgId:t}),E(!0),j(!0)},children:"Kitabxanadan Seç"})]})]})]})]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#94a3b8",gap:"1rem"},children:[e.jsx(As,{size:48,style:{opacity:.2}}),e.jsx("p",{children:"Redaktə etmək üçün sol tərəfdən bir komponent seçin."})]})})}),l&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-card fade-in",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Yeni Bölmə Əlavə Et"}),e.jsx("button",{onClick:()=>c(!1),children:e.jsx(Ot,{size:20})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Bölmə Başlığı"}),e.jsx("input",{type:"text",value:ne,onChange:t=>le(t.target.value),placeholder:"Məs: Xidmətlərimiz, Kampaniyalar...",autoFocus:!0})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>c(!1),children:"Ləğv et"}),e.jsx("button",{className:"btn-primary",onClick:Bs,children:"Əlavə et"})]})]})}),A&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-card fade-in",style:{maxWidth:"800px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Sistem Şəkilləri"}),e.jsx("button",{onClick:()=>j(!1),children:e.jsx(Ot,{size:20})})]}),e.jsx("div",{className:"modal-body",style:{maxHeight:"60vh",overflowY:"auto"},children:e.jsx("div",{className:"image-selector-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(130px, 1fr))",gap:"1rem"},children:P.length>0?P.map((t,a)=>e.jsxs("div",{className:"selector-image-card",onClick:()=>Gs(t),style:{cursor:"pointer",border:"2px solid #f1f5f9",borderRadius:"12px",overflow:"hidden",transition:"all 0.2s"},children:[e.jsx("div",{style:{aspectRatio:"1/1",background:"#f8fafc"},children:e.jsx("img",{src:t,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsx("div",{style:{padding:"0.5rem",fontSize:"10px",color:"#64748b",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"},children:t.split("/").pop()})]},a)):e.jsx("div",{style:{gridColumn:"1/-1",textAlign:"center",padding:"3rem",color:"#94a3b8"},children:"Sistemdə heç bir şəkil tapılmadı."})})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn-secondary",onClick:()=>j(!1),children:"Bağla"})})]})})]})},Pi=({currentUser:s})=>{const[i,n]=u.useState([]),[g,x]=u.useState(!0),[f,p]=u.useState(!1),[b,v]=u.useState(null),m=async()=>{try{const c=localStorage.getItem("forsaj_admin_token"),A=await fetch("/api/users",{headers:{Authorization:`Bearer ${c}`}});if(!A.ok)throw new Error("Yükləmə uğursuz oldu");const j=await A.json();n(j||[])}catch{N.error("İstifadəçiləri yükləmək mümkün olmadı")}finally{x(!1)}};u.useEffect(()=>{m()},[]);const T=async c=>{if(c.preventDefault(),!b?.username||!b?.name||!b?.id&&!b?.password){N.error("Zəhmət olmasa bütün sahələri doldurun");return}try{const A=localStorage.getItem("forsaj_admin_token"),j=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify(b)});if(j.ok)N.success(b.id?"İstifadəçi yeniləndi":"Yeni istifadəçi yaradıldı"),p(!1),v(null),m();else{const w=await j.json();N.error(w.error||"Xəta baş verdi")}}catch{N.error("Serverlə bağlantı kəsildi")}},C=async c=>{if(window.confirm("Bu istifadəçini silmək istədiyinizə əminsiniz?"))try{const A=localStorage.getItem("forsaj_admin_token"),j=await fetch(`/api/users/${c}`,{method:"DELETE",headers:{Authorization:`Bearer ${A}`}});if(j.ok)N.success("İstifadəçi silindi"),m();else{const w=await j.json();N.error(w.error||"Silmək mümkün olmadı")}}catch{N.error("Serverlə bağlantı kəsildi")}},l=(c=null)=>{v(c?{...c}:{username:"",name:"",password:"",role:"secondary"}),p(!0)};return g?e.jsx("div",{className:"loading-state",children:"Yüklənir..."}):e.jsxs("div",{className:"users-manager fade-in",children:[e.jsxs("div",{className:"manager-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Admin Hesabları"}),e.jsx("p",{children:"Sistemi idarə edən bütün administratorların siyahısı və səlahiyyətləri"})]}),s.role==="master"&&e.jsxs("button",{className:"add-user-btn",onClick:()=>l(),children:[e.jsx(Ea,{size:18})," Yeni idarəçi"]})]}),e.jsx("div",{className:"users-grid",children:i.map(c=>e.jsxs("div",{className:"user-card",children:[e.jsxs("div",{className:"user-avatar",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${c.name}&background=${c.role==="master"?"3b82f6":"f59e0b"}&color=fff`,alt:c.name}),e.jsxs("div",{className:`role-badge ${c.role||"secondary"}`,children:[e.jsx(ps,{size:10})," ",c.role==="master"?"Baş admin":"Redaktor"]})]}),e.jsxs("div",{className:"user-details",children:[e.jsx("h3",{children:c.name}),e.jsxs("span",{children:["@",c.username||"username"]})]}),s.role==="master"&&e.jsxs("div",{className:"user-actions",children:[e.jsx("button",{className:"edit-btn",onClick:()=>l(c),title:"Düzəliş et",children:e.jsx(Ra,{size:16})}),e.jsx("button",{className:"delete-btn",onClick:()=>C(c.id.toString()),title:"Sil",children:e.jsx(te,{size:16})})]})]},c.id))}),f&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:b?.id?"İstifadəçini redaktə et":"Yeni idarəçi hesabı"}),e.jsx("button",{onClick:()=>p(!1),children:e.jsx(Ot,{size:20})})]}),e.jsxs("form",{onSubmit:T,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(Ke,{size:14})," Tam Ad"]}),e.jsx("input",{type:"text",value:b?.name||"",onChange:c=>v({...b,name:c.target.value}),placeholder:"Məs: Əli Məmmədov",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(Ke,{size:14})," İstifadəçi Adı"]}),e.jsx("input",{type:"text",value:b?.username||"",onChange:c=>v({...b,username:c.target.value}),placeholder:"Məs: alimm",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(_t,{size:14})," Şifrə ",b?.id&&e.jsx("span",{className:"helper-text",children:"(Dəyişmək istəmirsinizsə boş saxlayın)"})]}),e.jsx("input",{type:"password",value:b?.password||"",onChange:c=>v({...b,password:c.target.value}),placeholder:"••••••••",required:!b?.id})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(ps,{size:14})," Yetki (Rol)"]}),e.jsxs("select",{value:b?.role||"secondary",onChange:c=>v({...b,role:c.target.value}),children:[e.jsx("option",{value:"master",children:"Baş Admin (Tam səlahiyyət)"}),e.jsx("option",{value:"secondary",children:"Redaktor (Məhdud səlahiyyət)"})]})]}),b?.role==="master"&&e.jsxs("div",{className:"role-warning",children:[e.jsx(za,{size:14})," Baş Admin bütün sistem daxilində tam səlahiyyətə malikdir."]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>p(!1),children:"Ləğv et"}),e.jsxs("button",{type:"submit",className:"save-btn",children:[e.jsx(Pt,{size:18})," Yadda Saxla"]})]})]})]})})]})},$i=()=>{const[s,i]=u.useState(!1),n=async()=>{i(!0);const x=N.loading("Front qovluğu skan edilir...");try{if(!(await fetch("/api/extract-content",{method:"POST"})).ok)throw new Error("Skan xətası");N.success("Skan tamamlandı! Panel yenilənir...",{id:x}),setTimeout(()=>window.location.reload(),1500)}catch{N.error("Skan uğursuz oldu!",{id:x})}finally{i(!1)}},g=[{id:1,title:"Sitemap Faylını Yaradın",description:"public/sitemap.json faylına menyu strukturunuzu əlavə edin və ya front-dan gətirin.",path:"public/sitemap.json",icon:Oa},{id:2,title:"Front Layihəsini Sinxronlaşdırın",description:"/front qovluğundakı React layihəsini skan edərək bütün səhifələri menyuya çıxarın.",path:"/front/src/pages",icon:_a},{id:3,title:"Sistem Ayarlarını Tənzimləyin",description:"Saytın ümumi tənzimləmələrini, loqo və əlaqə məlumatlarını idarə edin.",path:"Sistem Ayarları",icon:bs}];return e.jsxs("div",{className:"setup-guide",children:[e.jsxs("div",{className:"setup-header",children:[e.jsxs("div",{className:"setup-brand",children:[e.jsx("div",{className:"octo-logo",children:"🏎️"}),e.jsx("h2",{children:"Forsaj Club İdarəetmə"})]}),e.jsx("h1",{children:"Xoş Gəlmisiniz! Paneli Qurmağa Başlayaq"}),e.jsx("p",{children:"Forsaj Club platformanız üçün premium admin paneli artıq hazırdır. Aşağıdakı addımları izləyərək front layihənizi adminlə birləşdirin."})]}),e.jsxs("div",{className:"setup-grid",children:[e.jsx("div",{className:"steps-container",children:g.map(x=>e.jsxs("div",{className:"step-card",children:[e.jsx("div",{className:"step-icon",children:e.jsx(x.icon,{size:26})}),e.jsxs("div",{className:"step-content",children:[e.jsx("h3",{children:x.title}),e.jsx("p",{children:x.description}),e.jsx("span",{className:"step-badge",children:x.path})]})]},x.id))}),e.jsxs("div",{className:"setup-sidebar-actions",children:[e.jsxs("div",{className:"action-card primary",children:[e.jsx(Da,{size:32}),e.jsx("h4",{children:"Yeni Səhifə Əlavə Et"}),e.jsx("p",{children:"Dinamik olaraq yeni admin səhifəsi yaradın."})]}),e.jsxs("div",{className:"action-card secondary",children:[e.jsx(Bt,{size:32}),e.jsx("h4",{children:"Front Skaner"}),e.jsx("p",{children:"/front qosulub. Skanlamağa hazırdır."}),e.jsx("button",{className:`scan-btn ${s?"loading":""}`,onClick:n,disabled:s,children:s?e.jsx(Is,{className:"animate-spin"}):"İndi Skan Et"})]})]})]}),e.jsx("div",{className:"setup-footer",children:e.jsxs("div",{className:"info-box",children:[e.jsx("strong",{children:"Məlumat:"})," /front qovluğu aşkar edildi. Sitemap avtomatik generasiya olunduqda bu ekran Dashboard ilə əvəzlənəcək."]})})]})},Yi=({onLogin:s})=>{const[i,n]=u.useState(!0),[g,x]=u.useState(""),[f,p]=u.useState(""),[b,v]=u.useState(""),[m,T]=u.useState(!1);u.useEffect(()=>{(async()=>{try{(await(await fetch("/api/check-setup")).json()).needsSetup&&n(!1)}catch(c){console.error("Setup check failed",c)}})()},[]);const C=async l=>{l.preventDefault();const c=g.trim(),A=b.trim();if(!c||!f.trim()){N.error("İstifadəçi adı və şifrə mütləqdir");return}if(!i&&!A){N.error("Tam ad mütləqdir");return}if(!i&&f.length<6){N.error("Şifrə ən azı 6 simvol olmalıdır");return}T(!0);try{const E=await fetch(i?"/api/login":"/api/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i?{username:c,password:f}:{username:c,password:f,name:A})}),P=await E.json();if(!E.ok)throw new Error(P.error||(i?"Giriş uğursuz oldu":"Quraşdırma uğursuz oldu"));i?(localStorage.setItem("forsaj_admin_token",P.token),localStorage.setItem("forsaj_admin_user",JSON.stringify(P.user)),s(P.user),N.success("Xoş gəldiniz!")):(N.success("Baza uğurla başladıldı! İndi daxil ola bilərsiniz."),n(!0))}catch(j){N.error(j.message||"Əməliyyat uğursuz oldu")}finally{T(!1)}};return e.jsx("div",{className:"login-page",children:e.jsxs("div",{className:"login-card fade-in",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("div",{className:"login-logo",children:i?e.jsx(La,{size:40,className:"logo-icon"}):e.jsx(_t,{size:40,className:"logo-icon"})}),e.jsx("h1",{children:i?"Forsaj İdarəetmə Paneli":"Sistem Quraşdırılması"}),e.jsx("p",{children:i?"Sistemə daxil olmaq üçün məlumatlarınızı daxil edin":"İlkin Baş Admin hesabını yaradaraq sistemi başladın"})]}),e.jsxs("form",{className:"login-form",onSubmit:C,children:[!i&&e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(Ke,{size:16})," Tam Adınız"]}),e.jsx("input",{type:"text",value:b,onChange:l=>v(l.target.value),placeholder:"Məs: Əli Məmmədov",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(Ke,{size:16})," İstifadəçi Adı"]}),e.jsx("input",{type:"text",value:g,onChange:l=>x(l.target.value),placeholder:"Məs: admin",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(_t,{size:16})," Şifrə"]}),e.jsx("input",{type:"password",value:f,onChange:l=>p(l.target.value),placeholder:"••••••••",required:!0})]}),e.jsx("button",{type:"submit",className:"login-btn",disabled:m,children:m?e.jsxs("div",{className:"loader-container",children:[e.jsx(Is,{className:"animate-spin",size:20}),e.jsx("span",{children:"Gözləyin..."})]}):i?"Daxil ol":"Sistemi başlat"})]}),e.jsx("div",{className:"login-footer",children:e.jsx("p",{children:"© 2026 Forsaj Club. Platformanın təhlükəsizliyi üçün mütəmadi olaraq şifrənizi yeniləyin."})})]})})},Fi=()=>{const[s,i]=u.useState([]),[n,g]=u.useState(null),[x,f]=u.useState(!0),[p,b]=u.useState("all"),v=async()=>{const c=localStorage.getItem("forsaj_admin_token");try{const A=await fetch("/api/applications",{headers:{Authorization:`Bearer ${c}`}});if(A.ok){const j=await A.json();i(j)}}catch{N.error("Müraciətlər yüklənərkən xəta baş verdi")}finally{f(!1)}};u.useEffect(()=>{v()},[]);const m=async c=>{const A=localStorage.getItem("forsaj_admin_token");try{(await fetch(`/api/applications/${c}/read`,{method:"POST",headers:{Authorization:`Bearer ${A}`}})).ok&&(i(w=>w.map(E=>E.id===c?{...E,status:"read"}:E)),n?.id===c&&g(w=>w?{...w,status:"read"}:null))}catch(j){console.error(j)}},T=async c=>{if(!window.confirm("Bu müraciəti silmək istədiyinizə əminsiniz?"))return;const A=localStorage.getItem("forsaj_admin_token");try{(await fetch(`/api/applications/${c}`,{method:"DELETE",headers:{Authorization:`Bearer ${A}`}})).ok&&(i(w=>w.filter(E=>E.id!==c)),n?.id===c&&g(null),N.success("Müraciət silindi"))}catch{N.error("Silinmə zamanı xəta baş verdi")}},C=s.filter(c=>p==="unread"?c.status==="unread":p==="read"?c.status==="read":!0),l=c=>{try{const A=JSON.parse(c);return e.jsx("div",{className:"app-details-grid",children:Object.entries(A).map(([j,w])=>e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"detail-label",children:[j.toUpperCase(),":"]}),e.jsx("span",{className:"detail-value",children:String(w)})]},j))})}catch{return e.jsx("div",{className:"detail-text",children:c})}};return x?e.jsx("div",{className:"loading-state",children:"Yüklənir..."}):e.jsxs("div",{className:"applications-manager fade-in",children:[e.jsxs("div",{className:"manager-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Müraciətlər"}),e.jsx("p",{children:"İstifadəçilər tərəfindən göndərilən formlar və qeydiyyatlar"})]}),e.jsxs("div",{className:"filter-tabs",children:[e.jsx("button",{className:p==="all"?"active":"",onClick:()=>b("all"),children:"Hamısı"}),e.jsx("button",{className:p==="unread"?"active":"",onClick:()=>b("unread"),children:"Oxunmamış"}),e.jsx("button",{className:p==="read"?"active":"",onClick:()=>b("read"),children:"Oxunmuş"})]})]}),e.jsxs("div",{className:"manager-body",children:[e.jsx("div",{className:"applications-list",children:C.length===0?e.jsx("div",{className:"empty-list",children:"Heç bir müraciət tapılmadı"}):C.map(c=>e.jsxs("div",{className:`application-item ${c.status} ${n?.id===c.id?"selected":""}`,onClick:()=>{g(c),c.status==="unread"&&m(c.id)},children:[e.jsx("div",{className:"app-item-icon",children:c.status==="unread"?e.jsx(Ns,{className:"icon-unread"}):e.jsx(Ma,{className:"icon-read"})}),e.jsxs("div",{className:"app-item-main",children:[e.jsxs("div",{className:"app-item-header",children:[e.jsx("span",{className:"app-item-name",children:c.name}),e.jsx("span",{className:"app-item-date",children:new Date(c.created_at).toLocaleDateString()})]}),e.jsx("div",{className:"app-item-type",children:c.type})]}),e.jsx(ys,{size:16,className:"chevron"})]},c.id))}),e.jsx("div",{className:"application-details",children:n?e.jsxs("div",{className:"details-card fade-in",children:[e.jsxs("div",{className:"details-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Müraciət Təfərrüatları"}),e.jsx("span",{className:`status-badge ${n.status}`,children:n.status==="unread"?"Yeni":"Oxunub"})]}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{className:"btn-delete",onClick:()=>T(n.id),children:e.jsx(te,{size:18})})})]}),e.jsxs("div",{className:"details-info",children:[e.jsxs("div",{className:"info-group",children:[e.jsxs("label",{children:[e.jsx(Ke,{size:16})," Göndərən"]}),e.jsx("p",{children:n.name})]}),e.jsxs("div",{className:"info-group",children:[e.jsxs("label",{children:[e.jsx(Ss,{size:16})," Əlaqə"]}),e.jsx("p",{children:n.contact})]}),e.jsxs("div",{className:"info-group",children:[e.jsxs("label",{children:[e.jsx(We,{size:16})," Kateqoriya"]}),e.jsx("p",{children:n.type})]})]}),e.jsxs("div",{className:"details-content",children:[e.jsx("label",{children:"Məzmun"}),e.jsx("div",{className:"content-box",children:l(n.content)})]})]}):e.jsxs("div",{className:"details-placeholder",children:[e.jsx(js,{size:48}),e.jsx("p",{children:"Baxmaq üçün siyahıdan müraciət seçin"})]})})]})]})},qi=()=>{const[s,i]=u.useState([]),[n,g]=u.useState(!1),[x,f]=u.useState(!0),p=Mt(),b=async()=>{try{const c=await(await fetch("/api/site-content")).json();i(c),f(!1)}catch{N.error("Ayarlar yüklənərkən xəta baş verdi")}};u.useEffect(()=>{b()},[]),u.useEffect(()=>{if(x)return;const c=new URLSearchParams(p.search).get("tab"),j=c?{seo:"seo-basic",general:"branding",contact:"contact-details",social:"social-links",stats:"stats"}[c]:"";j&&setTimeout(()=>{const w=document.querySelector(`[data-settings-section="${j}"]`);w&&w.scrollIntoView({behavior:"smooth",block:"start"})},50)},[p.search,x]);const v=(l,c,A=!1)=>{const j=[...s];let w=j.findIndex(E=>E.id==="general");if(w===-1&&(j.push({id:"general",title:"SİSTEM AYARLARI",sections:[],images:[]}),w=j.length-1),A){const E=j[w].images.findIndex(P=>P.id===l);E===-1?j[w].images.push({id:l,path:c,alt:l,type:"local"}):j[w].images[E].path=c}else{const E=j[w].sections.findIndex(P=>P.id===l);E===-1?j[w].sections.push({id:l,type:"text",label:l,value:c}):j[w].sections[E].value=c}i(j)},m=(l,c=!1)=>{const A=s.find(j=>j.id==="general");return A?c?A.images.find(j=>j.id===l)?.path||"":A.sections.find(j=>j.id===l)?.value||"":""},T=async(l,c)=>{const A=l.target.files?.[0];if(!A)return;const j=new FormData;j.append("image",A);const w=N.loading("Şəkil yüklənir...");try{const E=await fetch("/api/upload-image",{method:"POST",body:j});if(E.ok){const P=await E.json();v(c,P.url,!0),N.success("Şəkil yükləndi",{id:w})}}catch{N.error("Yükləmə xətası",{id:w})}},C=async()=>{g(!0);const l=N.loading("Yadda saxlanılır...");try{await fetch("/api/save-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),N.success("Ayarlar qeyd edildi!",{id:l})}catch{N.error("Xəta baş verdi",{id:l})}finally{g(!1)}};return x?e.jsx("div",{className:"loading-state",children:"Yüklənir..."}):e.jsxs("div",{className:"general-settings fade-in",children:[e.jsxs("div",{className:"settings-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Sistem Ayarları"}),e.jsx("p",{children:"SEO, Brendinq və ümumi sayt tənzimləmələri"})]}),e.jsxs("button",{className:"save-btn",onClick:C,disabled:n,children:[e.jsx(Pt,{size:18}),e.jsx("span",{children:"Yadda Saxla"})]})]}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"seo-basic",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(re,{size:20,className:"text-blue-500"}),e.jsx("h2",{children:"SEO və axtarış motoru"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Meta başlıq (sayt adı)"}),e.jsx("input",{type:"text",value:m("SEO_TITLE"),onChange:l=>v("SEO_TITLE",l.target.value),placeholder:"Məs: Forsaj Club - Offroad & Motorsport"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Meta təsvir"}),e.jsx("textarea",{value:m("SEO_DESCRIPTION"),onChange:l=>v("SEO_DESCRIPTION",l.target.value),placeholder:"Sayt haqqında qısa məlumat..."})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Açar sözlər"}),e.jsx("input",{type:"text",value:m("SEO_KEYWORDS"),onChange:l=>v("SEO_KEYWORDS",l.target.value),placeholder:"offroad, baki, yarış, mitsubishi, pajero"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Kanonik URL"}),e.jsx("input",{type:"text",value:m("SEO_CANONICAL_URL"),onChange:l=>v("SEO_CANONICAL_URL",l.target.value),placeholder:"https://forsaj.az"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Robots direktivi"}),e.jsx("input",{type:"text",value:m("SEO_ROBOTS"),onChange:l=>v("SEO_ROBOTS",l.target.value),placeholder:"index,follow"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Müəllif"}),e.jsx("input",{type:"text",value:m("SEO_AUTHOR"),onChange:l=>v("SEO_AUTHOR",l.target.value),placeholder:"Forsaj Club"})]})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Dil (html lang)"}),e.jsx("input",{type:"text",value:m("SEO_LANGUAGE"),onChange:l=>v("SEO_LANGUAGE",l.target.value),placeholder:"az"})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"seo-social",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(re,{size:20,className:"text-cyan-500"}),e.jsx("h2",{children:"Sosial paylaşım SEO (OG / Twitter)"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG başlıq"}),e.jsx("input",{type:"text",value:m("SEO_OG_TITLE"),onChange:l=>v("SEO_OG_TITLE",l.target.value),placeholder:"Sosial şəbəkə başlığı"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG təsvir"}),e.jsx("textarea",{value:m("SEO_OG_DESCRIPTION"),onChange:l=>v("SEO_OG_DESCRIPTION",l.target.value),placeholder:"Sosial şəbəkə paylaşım təsviri"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG URL"}),e.jsx("input",{type:"text",value:m("SEO_OG_URL"),onChange:l=>v("SEO_OG_URL",l.target.value),placeholder:"https://forsaj.az"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Twitter kart növü"}),e.jsx("input",{type:"text",value:m("SEO_TWITTER_CARD"),onChange:l=>v("SEO_TWITTER_CARD",l.target.value),placeholder:"summary_large_image"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Twitter hesabı (site)"}),e.jsx("input",{type:"text",value:m("SEO_TWITTER_SITE"),onChange:l=>v("SEO_TWITTER_SITE",l.target.value),placeholder:"@forsajclub"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Twitter müəllif"}),e.jsx("input",{type:"text",value:m("SEO_TWITTER_CREATOR"),onChange:l=>v("SEO_TWITTER_CREATOR",l.target.value),placeholder:"@forsajclub"})]})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"OG şəkli"}),e.jsx("div",{className:"logo-preview",style:{minHeight:"140px"},children:m("SEO_OG_IMAGE",!0)?e.jsx("img",{src:m("SEO_OG_IMAGE",!0),alt:"OG Şəkli"}):e.jsx("div",{className:"no-logo",children:"OG şəkli yoxdur"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",style:{marginTop:"10px"},children:[e.jsxs("label",{className:"upload-btn",children:[e.jsx(Tt,{size:14})," Şəkil yüklə",e.jsx("input",{type:"file",hidden:!0,onChange:l=>T(l,"SEO_OG_IMAGE")})]}),e.jsx("input",{type:"text",value:m("SEO_OG_IMAGE",!0),onChange:l=>v("SEO_OG_IMAGE",l.target.value,!0),placeholder:"https://forsaj.az/og-cover.jpg"})]})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"seo-verify",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(us,{size:20,className:"text-violet-500"}),e.jsx("h2",{children:"Axtarış motoru təsdiqləri"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Google təsdiq kodu"}),e.jsx("input",{type:"text",value:m("SEO_GOOGLE_VERIFICATION"),onChange:l=>v("SEO_GOOGLE_VERIFICATION",l.target.value),placeholder:"google-site-verification kodu"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Bing təsdiq kodu"}),e.jsx("input",{type:"text",value:m("SEO_BING_VERIFICATION"),onChange:l=>v("SEO_BING_VERIFICATION",l.target.value),placeholder:"msvalidate.01 kodu"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Yandex təsdiq kodu"}),e.jsx("input",{type:"text",value:m("SEO_YANDEX_VERIFICATION"),onChange:l=>v("SEO_YANDEX_VERIFICATION",l.target.value),placeholder:"yandex-verification kodu"})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"branding",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(de,{size:20,className:"text-orange-500"}),e.jsx("h2",{children:"Brendinq & Loqo"})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"logo-upload-grid",children:[e.jsxs("div",{className:"logo-box",children:[e.jsx("label",{children:"Əsas Loqo (Light)"}),e.jsx("div",{className:"logo-preview",children:m("SITE_LOGO_LIGHT",!0)?e.jsx("img",{src:m("SITE_LOGO_LIGHT",!0),alt:"Logo Light"}):e.jsx("div",{className:"no-logo",children:"Loqo yoxdur"})}),e.jsxs("label",{className:"upload-btn",children:[e.jsx(Tt,{size:14})," Yüklə",e.jsx("input",{type:"file",hidden:!0,onChange:l=>T(l,"SITE_LOGO_LIGHT")})]})]}),e.jsxs("div",{className:"logo-box",children:[e.jsx("label",{children:"Alternativ Loqo (Dark)"}),e.jsx("div",{className:"logo-preview dark-bg",children:m("SITE_LOGO_DARK",!0)?e.jsx("img",{src:m("SITE_LOGO_DARK",!0),alt:"Logo Dark"}):e.jsx("div",{className:"no-logo",children:"Loqo yoxdur"})}),e.jsxs("label",{className:"upload-btn",children:[e.jsx(Tt,{size:14})," Yüklə",e.jsx("input",{type:"file",hidden:!0,onChange:l=>T(l,"SITE_LOGO_DARK")})]})]})]})})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"contact-details",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(de,{size:20,className:"text-red-500"}),e.jsx("h2",{children:"Əlaqə & Ünvan Məlumatları"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Baş Ofis Ünvan (Sətir 1)"}),e.jsx("input",{type:"text",value:m("CONTACT_ADDRESS_1"),onChange:l=>v("CONTACT_ADDRESS_1",l.target.value),placeholder:"Məs: AZADLIQ 102, BAKI"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Baş Ofis Ünvan (Sətir 2)"}),e.jsx("input",{type:"text",value:m("CONTACT_ADDRESS_2"),onChange:l=>v("CONTACT_ADDRESS_2",l.target.value),placeholder:"Məs: AZƏRBAYCAN // SECTOR_01"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"İş Saatları"}),e.jsx("input",{type:"text",value:m("CONTACT_HOURS"),onChange:l=>v("CONTACT_HOURS",l.target.value),placeholder:"Məs: 09:00 - 18:00"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Əlaqə Nömrəsi"}),e.jsx("input",{type:"text",value:m("CONTACT_PHONE"),onChange:l=>v("CONTACT_PHONE",l.target.value),placeholder:"+994 50 000 00 00"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Əlaqə E-poçtu"}),e.jsx("input",{type:"text",value:m("CONTACT_EMAIL"),onChange:l=>v("CONTACT_EMAIL",l.target.value),placeholder:"info@forsaj.az"})]})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"departments",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(Ba,{size:20,className:"text-purple-500"}),e.jsx("h2",{children:"Şöbə E-poçtları"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Baş Ofis (HQ)"}),e.jsx("input",{type:"text",value:m("DEPT_HQ_EMAIL"),onChange:l=>v("DEPT_HQ_EMAIL",l.target.value),placeholder:"hq@forsaj.az"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Media və PR"}),e.jsx("input",{type:"text",value:m("DEPT_PR_EMAIL"),onChange:l=>v("DEPT_PR_EMAIL",l.target.value),placeholder:"pr@forsaj.az"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Texniki Dəstək"}),e.jsx("input",{type:"text",value:m("DEPT_TECH_EMAIL"),onChange:l=>v("DEPT_TECH_EMAIL",l.target.value),placeholder:"tech@forsaj.az"})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"social-links",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(re,{size:20,className:"text-pink-500"}),e.jsx("h2",{children:"Sosial Media Linkləri"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Instagram"}),e.jsx("input",{type:"text",value:m("SOCIAL_INSTAGRAM"),onChange:l=>v("SOCIAL_INSTAGRAM",l.target.value),placeholder:"https://instagram.com/forsajclub"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Youtube"}),e.jsx("input",{type:"text",value:m("SOCIAL_YOUTUBE"),onChange:l=>v("SOCIAL_YOUTUBE",l.target.value),placeholder:"https://youtube.com/@forsajclub"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Facebook"}),e.jsx("input",{type:"text",value:m("SOCIAL_FACEBOOK"),onChange:l=>v("SOCIAL_FACEBOOK",l.target.value),placeholder:"https://facebook.com/forsajclub"})]})]})]}),e.jsxs("div",{className:"settings-card shadow-sm","data-settings-section":"stats",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(us,{size:20,className:"text-green-500"}),e.jsx("h2",{children:"Sayt Statistikaları"})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"stats-edit-grid",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Pilot Sayı"}),e.jsx("input",{type:"text",value:m("STATS_PILOTS"),onChange:l=>v("STATS_PILOTS",l.target.value),placeholder:"Susmaya görə: 140+"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Yarış Sayı"}),e.jsx("input",{type:"text",value:m("STATS_RACES"),onChange:l=>v("STATS_RACES",l.target.value),placeholder:"Susmaya görə: 50+"})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{children:"Gənc İştirakçı"}),e.jsx("input",{type:"text",value:m("STATS_YOUTH"),onChange:l=>v("STATS_YOUTH",l.target.value),placeholder:"Susmaya görə: 20+"})]})]})})]})]})]})},ke=s=>s.toLocaleLowerCase("az").normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),Gi={DASHBOARD:"Panel Ana Səhifə","ANA SƏHİFƏ":"Sayt Məzmunu",HAQQIMIZDA:"Haqqımızda",XƏBƏRLƏR:"Xəbərlər",TƏDBİRLƏR:"Tədbirlər",SÜRÜCÜLƏR:"Sürücülər",QALEREYA:"Qalereya",QAYDALAR:"Qaydalar",ƏLAQƏ:"Əlaqə","ADMİN HESABLARI":"İstifadəçi İdarəsi","SİSTEM AYARLARI":"Sistem Ayarları"},Ui={"Ümumi Görünüş":"Ana Səhifə Blokları",Naviqasiya:"Menyu və Naviqasiya","Giriş Hissəsi":"Hero Bölməsi","Sürüşən Yazı":"Marquee Yazısı","Sayt Sonu":"Footer","Xəbər Siyahısı":"Xəbər Məzmunu","Xəbər Səhifəsi":"Xəbər Səhifəsi Mətni","Tədbir Təqvimi":"Tədbir Siyahısı","Tədbir Səhifəsi":"Tədbir Səhifəsi Mətni","Sürücü Reytinqi":"Sürücü Cədvəli","Sürücülər Səhifəsi":"Sürücülər Səhifəsi Mətni"},Hi=s=>{const i=Gi[s.title]||s.title;return{...s,title:i,children:s.children?.map(n=>({...n,title:Ui[n.title]||n.title}))}},Wi=()=>{const[s,i]=u.useState(null),[n,g]=u.useState([]),[x,f]=u.useState(0),[p,b]=u.useState(!0);if(u.useEffect(()=>{const m=localStorage.getItem("forsaj_admin_user"),T=localStorage.getItem("forsaj_admin_token");if(m&&T)try{i(JSON.parse(m))}catch{localStorage.removeItem("forsaj_admin_user"),localStorage.removeItem("forsaj_admin_token"),i(null)}else i(null);b(!1)},[]),u.useEffect(()=>{const m=async()=>{const C=localStorage.getItem("forsaj_admin_token");if(C)try{let l=x;const c=await fetch("/api/applications/unread-count",{headers:{Authorization:`Bearer ${C}`}});if(c.ok){const{count:j}=await c.json();l=Number(j)||0,f(l)}const A=await fetch(`/api/sitemap?v=${Date.now()}`);if(A.ok){const j=await A.json();let w=Array.isArray(j)?j:[];w=w.map(q=>Hi(q));const E=w.find(q=>q.path==="/applications");E?l>0?E.badge={text:l.toString(),color:"bg-red-500"}:delete E.badge:w=[...w,{title:"Müraciətlər",path:"/applications",icon:"Inbox",badge:l>0?{text:l.toString(),color:"bg-red-500"}:void 0}];const P=[{title:"SEO Ayarları",path:"/general-settings?tab=seo",icon:"Globe"},{title:"Ümumi Parametrlər",path:"/general-settings?tab=general",icon:"Sliders"},{title:"Əlaqə və Sosial",path:"/general-settings?tab=contact",icon:"Phone"},{title:"Tətbiq Ayarları",path:"/general-settings?tab=stats",icon:"Activity"}],F=w.findIndex(q=>ke(q?.title||"")==="sistem ayarlari");if(F===-1)w=[...w,{title:"Sistem Ayarları",icon:"Settings",children:P}];else{const q=w[F],ne=new Map;(q.children||[]).forEach(le=>{const G=`${ke(le.title)}|${ke(le.path||"")}`;ne.set(G,le)}),P.forEach(le=>{const G=`${ke(le.title)}|${ke(le.path||"")}`;ne.set(G,le)}),w[F]={...q,children:Array.from(ne.values()),icon:q.icon||"Settings"}}const Q=new Map;for(const q of w){const ne=`${ke(q.path||"")}|${ke(q.title||"")}`;Q.set(ne,q)}g(Array.from(Q.values()))}}catch(l){console.error("Fetch data failed",l)}finally{b(!1)}};m();const T=setInterval(m,3e4);return()=>clearInterval(T)},[s]),p)return e.jsx("div",{style:{display:"flex",height:"100vh",width:"100vw",alignItems:"center",justifyContent:"center",background:"#f4f6f9",color:"#3b82f6",fontSize:"1.2rem",fontWeight:"600"},children:"Yüklənir..."});const v=!n||n.length===0;return e.jsx(xa,{basename:"/admin",children:e.jsxs("div",{className:"app-container",children:[e.jsx(Ti,{containerStyle:{zIndex:10001},position:"top-right",reverseOrder:!1}),s?e.jsxs(e.Fragment,{children:[e.jsx($a,{menuItems:n,user:s,onLogout:()=>{localStorage.removeItem("forsaj_admin_user"),localStorage.removeItem("forsaj_admin_token"),i(null)}}),e.jsxs("main",{className:"main-content",children:[e.jsx(Ya,{user:s}),e.jsx("div",{className:"content-body",children:e.jsx(ma,{children:v?e.jsx(De,{path:"*",element:e.jsx($i,{})}):e.jsxs(e.Fragment,{children:[e.jsx(De,{path:"/",element:e.jsx(Bi,{})}),e.jsx(De,{path:"/applications",element:e.jsx(Fi,{})}),e.jsx(De,{path:"/general-settings",element:e.jsx(qi,{})}),e.jsx(De,{path:"/users-management",element:e.jsx(Pi,{currentUser:s})}),e.jsx(De,{path:"*",element:e.jsx("div",{className:"fade-in",children:e.jsx("h1",{children:"Səhifə tapılmadı"})})})]})})})]})]}):e.jsx(Yi,{onLogin:i})]})})};ha.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(Wi,{})}));
